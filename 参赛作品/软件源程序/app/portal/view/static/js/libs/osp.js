SuperMap.OSP=SuperMap.OSP||{};SuperMap.OSP.Core=SuperMap.OSP.Core||{};SuperMap.OSP.Service=SuperMap.OSP.Service||{};SuperMap.OSP.SystemMaintenanceService=SuperMap.OSP.SystemMaintenanceService||{};SuperMap.OSP.Service.Utility=SuperMap.OSP.Service.Utility||{};SuperMap.OSP.UI=SuperMap.OSP.UI||{};SuperMap.OSP.ExtentionService=SuperMap.OSP.ExtentionService||{};SuperMap.OSP.Utility=SuperMap.OSP.Utility||{};SuperMap.OSP.Core.HashMap=SuperMap.Class({initialize:function(){this.size=0;this.entry=new Object()},put:function(a,b){if(!this.containsKey(a)){this.size++}this.entry[a]=b},get:function(a){return this.containsKey(a)?this.entry[a]:null},remove:function(a){if(this.containsKey(a)&&(delete this.entry[a])){this.size--}},containsKey:function(a){return(a in this.entry)},containsValue:function(a){for(var b in this.entry){if(this.entry[b]==a){return true}}return false},size:function(){return this.size},clear:function(){this.size=0;this.entry={}},values:function(){var a=new Array();for(var b in this.entry){a.push(this.entry[b])}return a},CLASS_NAME:"SuperMap.OSP.Core.HashMap"});SuperMap.OSP.Core.ScheduleType=SuperMap.Class({initialize:function(){},CLASS_NAME:"SuperMap.OSP.Core.ScheduleType"});SuperMap.OSP.Core.ScheduleType.DELAY=1;SuperMap.OSP.Core.ScheduleType.REPEAT=2;SuperMap.OSP.Core.ScheduleType.ACCELERATE=3;SuperMap.OSP.Core.ScheduleType.DECCELERATE=4;SuperMap.OSP.Core.TimerRule=function(a,b,c){this.scheduleType=0;this.delayTime=0;this.executionTime=0;if(typeof(a)=="number"){this.scheduleType=a}else{}if(typeof(b)=="number"){this.delayTime=b}else{}if(typeof(c)=="number"){this.executionTime=c}};SuperMap.OSP.Core.Timer=SuperMap.Class({initialize:function(){},method:function(){},timerRule:new SuperMap.OSP.Core.TimerRule(),run:function(c,b){this.method=c;this.timerRule=b;if(!this.time){this.time=new Date().getTime();this.executionTime=this.timerRule.executionTime;this.delayTime=this.timerRule.delayTime}var a=this;switch(this.timerRule.scheduleType){case 1:this.timer=setTimeout(a.method,a.delayTime);break;case 2:this._timer=setInterval(function(){var d=new Date().getTime();if(d<a.time+a.executionTime){a._method()}else{a.stop()}},a.delayTime);break;case 3:this.timer=setTimeout(function(){var d=new Date().getTime();a.delayTime=a.accelerateFun(a.delayTime);if(d<a.time+a.executionTime){a.method();a.run(a.method,a.timerRule)}else{a.stop()}},a.delayTime);break;case 4:this.timer=setTimeout(function(){var d=new Date().getTime();a.delayTime=a.daccelerateFun(a.delayTime);if(d<a.time+a.executionTime){a.method();a.run(a.method,a.timerRule)}else{a.stop()}},a.delayTime);break}},stop:function(){clearInterval(this.timer);clearTimeout(this.timer);this.time=null},pause:function(){var a=new Date().getTime();this.alreadyTime=a-this.time;this.executionTime=this.executionTime-this.alreadyTime;this.stop()},resume:function(){this.time=new Date().getTime();this.run(this.method,this.timerRule)},_accelerateFun:function(a){return Math.sqrt(a)/2},_daccelerateFun:function(a){return a*2},CLASS_NAME:"SuperMap.OSP.Core.Timer"});SuperMap.OSP.Core.ErrorType=SuperMap.Class({initialize:function(){},CLASS_NAME:"SuperMap.OSP.Core.ErrorType"});SuperMap.OSP.Core.ErrorType.PARAM=0;SuperMap.OSP.Core.ErrorType.BUSINESS=1;SuperMap.OSP.Core.ErrorType.CONDITION=2;SuperMap.OSP.Core.ErrorType.SYSTEM=3;SuperMap.OSP.Core.ErrorType.ENVIRONMENT=4;SuperMap.OSP.Core.Utility=SuperMap.Class({initialize:function(){},CLASS_NAME:"SuperMap.OSP.Core.Utility"});SuperMap.OSP.Core.Utility._Citys=[["中国","0","-1",13023822.823483625,3892550.351786297,-1],["重庆市","500000","1",11861249.483741755,3447529.5216167895,"1"],["天津市","120000","1",13048343.946957093,4739013.325428532,"1"],["上海市","310000","1",13522421.5982323,3662664.9471151386,"1"],["北京市","110000","1",12958399.468188493,4852082.440605948,"1"],["台湾","710000","2",13527079.094407598,2881954.339704872,1],["澳门","820000","2",12640624.734699689,2535718.7376508918,1],["香港","810000","2",12708536.637211505,2545344.2450692523,1],["阿勒泰地区","654300","650000",9811532.160046507,6081042.796547268,"2"],["塔城地区","654200","650000",9237610.832964418,5902407.151109204,"2"],["伊犁哈萨克自治州","654000","650000",9052952.169205192,5452583.069460591,"2"],["和田地区","653200","650000",8896916.75215517,4455042.355030347,"2"],["喀什地区","653100","650000",8459138.383076819,4789262.652963935,"2"],["克孜勒苏柯尔克孜自治州","653000","650000",8478957.25993969,4824540.664675309,"2"],["阿克苏地区","652900","650000",8934558.547410987,5037271.745944434,"2"],["巴音郭楞蒙古自治州","652800","650000",9589652.600026151,5125709.947029808,"2"],["博尔塔拉蒙古自治州","652700","650000",9135600.434588732,5606740.101652564,"2"],["昌吉回族自治州","652300","650000",9719131.52803304,5467165.202382888,"2"],["哈密地区","652200","650000",10410041.847574506,5284537.378849033,"2"],["吐鲁番地区","652100","650000",9928594.734689297,5304546.176199943,"2"],["克拉玛依市","650200","650000",9449835.542228783,5713275.54642931,"2"],["乌鲁木齐市","650100","650000",9753529.695966126,5438664.047941441,"2"],["中卫市","640500","640000",11707884.73259535,4511410.004841556,"2"],["固原市","640400","640000",11831200.123036,4301239.8947406905,"2"],["吴忠市","640300","640000",11821990.216284709,4579058.809103731,"2"],["石嘴山市","640200","640000",11840832.821213322,4724390.659491177,"2"],["银川市","640100","640000",11825565.130412044,4648547.151510733,"2"],["海西蒙古族藏族自治州","632800","630000",10839147.092486173,4491786.255662544,"2"],["玉树藏族自治州","632700","630000",10798730.102324877,3895995.1259512957,"2"],["果洛藏族自治州","632600","630000",11159184.839903314,4092279.3710017335,"2"],["海南藏族自治州","632500","630000",11201010.021623142,4340107.130747799,"2"],["黄南藏族自治州","632300","630000",11356330.767542273,4234721.701485662,"2"],["海北藏族自治州","632200","630000",11232245.825461771,4432762.530403581,"2"],["海东地区","632100","630000",11366178.312336829,4369897.674311004,"2"],["西宁市","630100","630000",11329846.190890191,4385881.905597225,"2"],["甘南藏族自治州","623000","620000",11455997.89063676,4161621.8306830414,"2"],["临夏回族自治州","622900","620000",11489332.178196333,4245904.117859969,"2"],["陇南市","621200","620000",11679855.931966987,3948624.967088284,"2"],["定西市","621100","620000",11646911.59658366,4243068.127291316,"2"],["庆阳市","621000","620000",11981587.857040117,4264737.177603766,"2"],["酒泉市","620900","620000",10964326.527800152,4827135.868840689,"2"],["平凉市","620800","620000",11873922.762490604,4237913.423241015,"2"],["张掖市","620700","620000",11182055.651925772,4711048.76852433,"2"],["武威市","620600","620000",11425617.577084877,4569331.025719753,"2"],["天水市","620500","620000",11769243.36800366,4107094.560230679,"2"],["白银市","620400","620000",11592539.59505652,4375837.558948359,"2"],["金昌市","620300","620000",11375509.779972067,4653162.004742564,"2"],["嘉峪关市","620200","620000",10941575.495549787,4832827.679274595,"2"],["兰州市","620100","620000",11558788.638642909,4309054.619382808,"2"],["商洛市","611000","610000",12238505.226787657,4011404.1766925105,"2"],["安康市","610900","610000",12137055.433367604,3853543.029878571,"2"],["榆林市","610800","610000",12215666.252139563,4619819.673757348,"2"],["汉中市","610700","610000",11913758.553590469,3904335.433610601,"2"],["延安市","610600","610000",12188343.551041298,4381479.897387284,"2"],["渭南市","610500","610000",12190584.746349439,4096143.7681006524,"2"],["咸阳市","610400","610000",12101449.115000939,4073090.4509499054,"2"],["宝鸡市","610300","610000",11936450.252552243,4077771.6824988006,"2"],["铜川市","610200","610000",12127742.556087328,4149844.7392006954,"2"],["西安市","610100","610000",12127622.331037272,4064410.4917462827,"2"],["林芝地区","542600","540000",10504273.128614068,3458385.218300045,"2"],["阿里地区","542500","540000",8917337.867463231,3829337.531249212,"2"],["那曲地区","542400","540000",10247079.018612418,3694743.7324992823,"2"],["日喀则地区","542300","540000",9894210.926970525,3409662.267773305,"2"],["山南地区","542200","540000",10216142.55288453,3405852.8169836514,"2"],["昌都地区","542100","540000",10817162.049651954,3651041.862291611,"2"],["拉萨市","540100","540000",10142798.481860986,3457883.63236948,"2"],["迪庆藏族自治州","533400","530000",11098900.21494218,3226177.5937150023,"2"],["怒江傈僳族自治州","533300","530000",11004266.625262892,2980830.1848497223,"2"],["德宏傣族景颇族自治州","533100","530000",10974414.077416858,2806173.092135077,"2"],["大理白族自治州","532900","530000",11161770.346396476,2950401.1516164406,"2"],["西双版纳傣族自治州","532800","530000",11220722.477052815,2512397.267037392,"2"],["文山壮族苗族自治州","532600","530000",11605215.100195188,2676641.666964822,"2"],["红河哈尼族彝族自治州","532500","530000",11507704.012998383,2676130.293694178,"2"],["楚雄彝族自治州","532300","530000",11302041.699035773,2881335.9070993983,"2"],["临沧市","530900","530000",11140793.301551392,2738497.413795969,"2"],["普洱市","530800","530000",11239966.722704211,2605166.555265154,"2"],["丽江市","530700","530000",11157595.642852748,3108115.0327512994,"2"],["昭通市","530600","530000",11545700.026873907,3165792.7932371246,"2"],["保山市","530500","530000",11038650.432981662,2889513.484239919,"2"],["玉溪市","530400","530000",11415436.073817944,2796359.5150342206,"2"],["曲靖市","530300","530000",11554540.018957293,2936061.014243057,"2"],["昆明市","530100","530000",11434983.55376226,2880412.4217774477,"2"],["黔南布依族苗族自治州","522700","520000",11969338.482912205,3030602.5178619795,"2"],["黔东南苗族侗族自治州","522600","520000",12020604.00272927,3071532.124074718,"2"],["毕节地区","522400","520000",11720164.496944249,3161318.3578628716,"2"],["黔西南布依族苗族自治州","522300","520000",11678147.623061273,2886535.6851308527,"2"],["铜仁地区","522200","520000",12154930.560601734,3215161.4222390866,"2"],["安顺市","520400","520000",11794032.77144994,3030455.3074026844,"2"],["遵义市","520300","520000",11903105.389641043,3214403.708393685,"2"],["六盘水市","520200","520000",11669696.46995923,3072725.678984734,"2"],["贵阳市","520100","520000",11870034.817955159,3079509.480239798,"2"],["凉山彝族自治州","513400","510000",11384344.762678364,3234065.273531304,"2"],["甘孜藏族自治州","513300","510000",11350407.0121592,3509906.60745543,"2"],["阿坝藏族羌族自治州","513200","510000",11379593.646811306,3750102.0561442734,"2"],["资阳市","512000","510000",11647117.315002648,3520107.768814711,"2"],["巴中市","511900","510000",11882789.137293307,3745611.3152331435,"2"],["雅安市","511800","510000",11467380.308570372,3501026.3254481056,"2"],["达州市","511700","510000",11963304.187274776,3659873.854253099,"2"],["广安市","511600","510000",11870356.086005589,3562298.6732384292,"2"],["宜宾市","511500","510000",11648805.141122054,3344084.9976238334,"2"],["眉山市","511400","510000",11560469.562953886,3513347.250499963,"2"],["南充市","511300","510000",11809077.823269634,3605569.679486273,"2"],["乐山市","511100","510000",11551142.548098283,3446095.956491619,"2"],["内江市","511000","510000",11695050.485862814,3449703.207899344,"2"],["遂宁市","510900","510000",11754549.863135893,3572196.61493818,"2"],["广元市","510800","510000",11782473.132886985,3820590.957984057,"2"],["绵阳市","510700","510000",11652830.008631175,3693678.561820177,"2"],["德阳市","510600","510000",11621521.179206587,3649223.087624946,"2"],["泸州市","510500","510000",11737780.027125848,3359337.7460294846,"2"],["攀枝花市","510400","510000",11323257.52418861,3071373.5386739615,"2"],["自贡市","510300","510000",11663879.803926298,3418911.804610347,"2"],["成都市","510100","510000",11584427.298484452,3588485.98588592,"2"],["三亚市","460200","460000",12190821.522906357,2067131.416847489,"2"],["海口市","460100","460000",12281700.306161188,2276785.3021451314,"2"],["崇左市","451400","450000",11952607.60872394,2557021.9380621184,"2"],["来宾市","451300","450000",12158454.490402285,2723019.5841184556,"2"],["河池市","451200","450000",12032010.688311877,2838076.947462405,"2"],["贺州市","451100","450000",12419528.752575025,2802648.492559386,"2"],["百色市","451000","450000",11868650.894045616,2741525.836291556,"2"],["玉林市","450900","450000",12263481.313019998,2588088.220215311,"2"],["贵港市","450800","450000",12200485.390541103,2645516.4875276266,"2"],["钦州市","450700","450000",12095345.689959725,2509226.4439994995,"2"],["防城港市","450600","450000",12061919.786459228,2473946.9397094985,"2"],["北海市","450500","450000",12147131.405757267,2449356.3731143484,"2"],["梧州市","450400","450000",12387546.66287012,2689795.2668107315,"2"],["桂林市","450300","450000",12277435.87910788,2909390.1574476,"2"],["柳州市","450200","450000",12181521.22472854,2793087.8335162904,"2"],["南宁市","450100","450000",12063305.714119606,2609831.459116401,"2"],["云浮市","445300","440000",12472729.450420039,2621785.7029131856,"2"],["揭阳市","445200","440000",12954524.65935296,2698626.966243044,"2"],["潮州市","445100","440000",12982439.802781224,2711593.406050913,"2"],["中山市","442000","440000",12622881.966340112,2573641.9940992007,"2"],["东莞市","441900","440000",12662829.744847711,2634460.217326242,"2"],["清远市","441800","440000",12585353.271686938,2714705.6602218095,"2"],["阳江市","441700","440000",12465787.56697417,2494480.5143093565,"2"],["河源市","441600","440000",12768406.485749943,2722184.565992014,"2"],["汕尾市","441500","440000",12843528.440360948,2606108.0754328957,"2"],["梅州市","441400","440000",12926718.60902567,2788577.1791984565,"2"],["惠州市","441300","440000",12736840.06302366,2645569.2581554432,"2"],["肇庆市","441200","440000",12519531.503934257,2637678.44110171,"2"],["茂名市","440900","440000",12348161.159110514,2471149.9786198484,"2"],["湛江市","440800","440000",12285157.666906245,2424204.612140049,"2"],["江门市","440700","440000",12588209.618501203,2581151.4319124306,"2"],["佛山市","440600","440000",12592570.78219201,2634663.7794346926,"2"],["汕头市","440500","440000",12989008.09801599,2674808.21994368,"2"],["珠海市","440400","440000",12643259.889685746,2544065.241705727,"2"],["深圳市","440300","440000",12696865.456518775,2576823.8885929286,"2"],["韶关市","440200","440000",12645585.019889945,2852528.7723314622,"2"],["广州市","440100","440000",12608585.426776512,2647632.04622517,"2"],["湘西土家族苗族自治州","433100","430000",12211441.788783448,3281912.7440005136,"2"],["娄底市","431300","430000",12467128.74419925,3210861.0556579866,"2"],["怀化市","431200","430000",12244975.894828998,3193056.258619983,"2"],["永州市","431100","430000",12424766.44593634,3051251.471593544,"2"],["郴州市","431000","430000",12580742.529697772,2970693.557707701,"2"],["益阳市","430900","430000",12507314.857736638,3318973.0060761897,"2"],["张家界市","430800","430000",12298491.515513465,3390447.3336309115,"2"],["常德市","430700","430000",12434223.704596173,3379664.2932024365,"2"],["岳阳市","430600","430000",12593428.27622959,3421184.7916607587,"2"],["邵阳市","430500","430000",12408532.94723294,3153443.3851562906,"2"],["衡阳市","430400","430000",12531437.346113577,3110141.190903621,"2"],["湘潭市","430300","430000",12572877.585034246,3227455.9524169443,"2"],["株洲市","430200","430000",12594015.041265562,3227247.877417477,"2"],["长沙市","430100","430000",12572301.61798888,3277755.5886833267,"2"],["恩施土家族苗族自治州","422800","420000",12188167.109648392,3538580.5043924,"2"],["随州市","421300","420000",12621699.196750432,3722720.4981989195,"2"],["咸宁市","421200","420000",12726311.68822341,3483158.7490268303,"2"],["黄冈市","421100","420000",12787513.585788682,3561967.3091614847,"2"],["荆州市","421000","420000",12494437.864319636,3546679.5464134403,"2"],["孝感市","420900","420000",12681127.552188383,3622988.524943852,"2"],["荆门市","420800","420000",12489995.32608106,3637342.424258655,"2"],["鄂州市","420700","420000",12790059.462543126,3553898.1997531354,"2"],["襄樊市","420600","420000",12481415.487647658,3764495.619505312,"2"],["宜昌市","420500","420000",12388344.489660634,3592807.664815006,"2"],["十堰市","420300","420000",12332971.614591772,3849031.8785678027,"2"],["黄石市","420200","420000",12806068.763792068,3529211.713937904,"2"],["武汉市","420100","420000",12724416.807851128,3579983.9234878886,"2"],["驻马店市","411700","410000",12693415.999457564,3892125.3000743086,"2"],["周口市","411600","410000",12763143.968142182,3974303.436705612,"2"],["信阳市","411500","410000",12698063.699517673,3779488.8278152985,"2"],["商丘市","411400","410000",12874790.070321443,4084548.881823978,"2"],["南阳市","411300","410000",12526601.404794537,3894061.2476775185,"2"],["三门峡市","411200","410000",12378731.38371369,4133011.279137561,"2"],["漯河市","411100","410000",12692275.085996425,3972742.773831397,"2"],["许昌市","411000","410000",12673955.460035557,4033559.9992291126,"2"],["濮阳市","410900","410000",12804971.7102103,4267901.85954469,"2"],["焦作市","410800","410000",12606038.325507673,4193148.0702458415,"2"],["新乡市","410700","410000",12682281.712668931,4205094.149949222,"2"],["鹤壁市","410600","410000",12723501.98427579,4266060.301384524,"2"],["安阳市","410500","410000",12734181.085666569,4314231.655887525,"2"],["平顶山市","410400","410000",12600534.801202344,3997439.384406513,"2"],["洛阳市","410300","410000",12518282.053969594,4112329.3876739964,"2"],["开封市","410200","410000",12724659.92961902,4136361.843848617,"2"],["郑州市","410100","410000",12648711.539108366,4129580.4303923035,"2"],["菏泽市","371700","370000",12855024.738133643,4195914.394870474,"2"],["滨州市","371600","370000",13137566.407508412,4491601.905806194,"2"],["聊城市","371500","370000",12911290.506838158,4363539.771384741,"2"],["德州市","371400","370000",12946614.296337191,4502186.389857378,"2"],["临沂市","371300","370000",13174383.659295926,4171122.4107650355,"2"],["莱芜市","371200","370000",13099440.483787134,4330247.856454662,"2"],["日照市","371100","370000",13305644.812350417,4220626.735368728,"2"],["威海市","371000","370000",13594552.2868062,4510400.256763012,"2"],["泰安市","370900","370000",13034213.49607376,4328155.520894187,"2"],["济宁市","370800","370000",12978304.283698255,4220619.905627002,"2"],["潍坊市","370700","370000",13265060.063716497,4398358.701351679,"2"],["烟台市","370600","370000",13512462.95658593,4513045.31555746,"2"],["东营市","370500","370000",13210818.862591038,4499678.090318688,"2"],["枣庄市","370400","370000",13088069.420441585,4143946.613628287,"2"],["淄博市","370300","370000",13141807.680107638,4413073.214108702,"2"],["青岛市","370200","370000",13400914.70423908,4309853.065386547,"2"],["济南市","370100","370000",13023822.823483625,4392550.351786297,"2"],["上饶市","361100","360000",13129400.12098331,3306381.29717192,"2"],["抚州市","361000","360000",12952966.186481854,3247973.4045224674,"2"],["宜春市","360900","360000",12734422.871600574,3223344.3834801335,"2"],["吉安市","360800","360000",12801046.028367477,3137691.386045568,"2"],["赣州市","360700","360000",12794457.695624366,2978087.9018443883,"2"],["鹰潭市","360600","360000",13032072.822265806,3281809.867426545,"2"],["新余市","360500","360000",12792542.77774374,3226023.15654467,"2"],["九江市","360400","360000",12913209.320900964,3465752.8135641865,"2"],["萍乡市","360300","360000",12674215.61368554,3201497.685045724,"2"],["景德镇市","360200","360000",13044195.180854721,3409835.9440909727,"2"],["南昌市","360100","360000",12897325.921996105,3335442.673661927,"2"],["宁德市","350900","350000",13305586.14697877,3081839.9792405507,"2"],["龙岩市","350800","350000",13028162.057234745,2888122.36168437,"2"],["南平市","350700","350000",13155524.02248522,3078731.3206384154,"2"],["漳州市","350600","350000",13096452.66865424,2816062.166913384,"2"],["泉州市","350500","350000",13201058.369638283,2864362.6833191356,"2"],["三明市","350400","350000",13095523.48486459,3031801.6067615203,"2"],["莆田市","350300","350000",13247877.900312554,2931599.8282336886,"2"],["厦门市","350200","350000",13145668.240048347,2811893.2649564953,"2"],["福州市","350100","350000",13280060.142461907,3008278.9185272967,"2"],["宣城市","341800","340000",13220182.835517585,3625058.997642701,"2"],["池州市","341700","340000",13079568.952805117,3590500.7714758925,"2"],["亳州市","341600","340000",12888437.95121219,4008112.128300583,"2"],["六安市","341500","340000",12970648.39703844,3728923.081689849,"2"],["巢湖市","341400","340000",13123347.123671426,3713976.9128862647,"2"],["宿州市","341300","340000",13020413.33011961,3981392.085816865,"2"],["阜阳市","341200","340000",12892390.906330258,3880682.825849837,"2"],["滁州市","341100","340000",13170970.937666677,3802998.2809761385,"2"],["黄山市","341000","340000",13173397.034649028,3467117.427392041,"2"],["安庆市","340800","340000",13030772.054015886,3571230.4548835643,"2"],["铜陵市","340700","340000",13114683.016383491,3625636.5698405495,"2"],["淮北市","340600","340000",13002010.437179627,4022857.986765322,"2"],["马鞍山市","340500","340000",13192112.735358136,3720151.0952289314,"2"],["淮南市","340400","340000",13024361.164541101,3845695.0465169386,"2"],["蚌埠市","340300","340000",13067703.964878917,3884234.8571349857,"2"],["芜湖市","340200","340000",13183923.183059458,3678566.686541225,"2"],["合肥市","340100","340000",13049668.537578044,3739750.102773379,"2"],["丽水市","331100","330000",13349810.93164214,3308176.0582493353,"2"],["台州市","331000","330000",13516524.782165997,3331927.491730061,"2"],["舟山市","330900","330000",13604037.597977713,3501639.614990707,"2"],["衢州市","330800","330000",13233014.633221328,3367484.089834117,"2"],["金华市","330700","330000",13319095.99170093,3385613.7394555425,"2"],["绍兴市","330600","330000",13422735.328185394,3504108.3649689076,"2"],["湖州市","330500","330000",13368130.891561478,3618857.695980137,"2"],["嘉兴市","330400","330000",13442449.34208794,3600185.541449081,"2"],["温州市","330300","330000",13436207.65823916,3248331.4419025755,"2"],["宁波市","330200","330000",13530930.748789048,3487320.9718342703,"2"],["杭州市","330100","330000",13375681.358663512,3538700.120082645,"2"],["宿迁市","321300","320000",13166344.054351347,4023866.1841210006,"2"],["泰州市","321200","320000",13348810.058100415,3827521.4509270014,"2"],["镇江市","321100","320000",13296375.23835206,3790481.137335046,"2"],["扬州市","321000","320000",13293070.830587352,3815102.204334504,"2"],["盐城市","320900","320000",13376292.613987459,3941762.405199365,"2"],["淮安市","320800","320000",13248742.741436524,3976578.0612861025,"2"],["连云港市","320700","320000",13271687.803559344,4109193.175017912,"2"],["南通市","320600","320000",13457899.374215137,3760849.5186095675,"2"],["苏州市","320500","320000",13423264.429725135,3671644.034937957,"2"],["常州市","320400","320000",13353467.665595207,3734604.48939087,"2"],["徐州市","320300","320000",13056036.346409893,4056616.9176534237,"2"],["无锡市","320200","320000",13392047.216241468,3706480.336778386,"2"],["南京市","320100","320000",13224348.856141033,3770970.4405671433,"2"],["大兴安岭地区","232700","230000",13821241.294106787,6849637.768338276,"2"],["绥化市","231200","230000",14134088.247696646,5885733.260178284,"2"],["黑河市","231100","230000",14196412.023090132,6488862.004615624,"2"],["牡丹江市","231000","230000",14430656.72950882,5551195.883858536,"2"],["七台河市","230900","230000",14583421.134641374,5743632.010300222,"2"],["佳木斯市","230800","230000",14507222.275276436,5909370.990930011,"2"],["伊春市","230700","230000",14342525.088647787,6061641.0087326225,"2"],["大庆市","230600","230000",13926553.094620928,5875371.709811939,"2"],["双鸭山市","230500","230000",14600560.551360851,5884604.5787142515,"2"],["鹤岗市","230400","230000",14504719.367845438,5999378.1337653175,"2"],["鸡西市","230300","230000",14579516.492182309,5668190.983015004,"2"],["齐齐哈尔市","230200","230000",13794456.488788035,6000082.700419371,"2"],["哈尔滨市","230100","230000",14085815.218431087,5748737.154397761,"2"],["延边朝鲜族自治州","222400","220000",14416860.125778375,5295388.179379614,"2"],["白城市","220800","220000",13674331.403634034,5719606.441206922,"2"],["松原市","220700","220000",13895469.353206724,5643787.14818955,"2"],["白山市","220600","220000",14073424.023271905,5151961.098644569,"2"],["通化市","220500","220000",14019548.172715232,5120348.543530785,"2"],["辽源市","220400","220000",13930938.971238695,5294911.0973985195,"2"],["四平市","220300","220000",13842609.960920483,5337245.496650354,"2"],["吉林市","220200","220000",14087464.52800668,5440439.3130875025,"2"],["长春市","220100","220000",13950968.353258653,5437039.696191624,"2"],["葫芦岛市","211400","210000",13451581.102556694,4969771.251602309,"2"],["朝阳市","211300","210000",13408509.810456922,5097344.702833275,"2"],["铁岭市","211200","210000",13786046.412578095,5203946.642026101,"2"],["盘锦市","211100","210000",13588844.491235264,5030035.763980655,"2"],["辽阳市","211000","210000",13711602.282346528,5052167.825004743,"2"],["阜新市","210900","210000",13544282.408514792,5164239.094500102,"2"],["营口市","210800","210000",13607173.245394377,4963292.883829666,"2"],["锦州市","210700","210000",13483737.295945201,5026390.549550795,"2"],["丹东市","210600","210000",13846495.901705094,4884427.147573701,"2"],["本溪市","210500","210000",13777655.37200108,5055805.125708751,"2"],["抚顺市","210400","210000",13798926.411621349,5142963.677159735,"2"],["鞍山市","210300","210000",13691697.244197782,5028384.145040757,"2"],["大连市","210200","210000",13538084.473225895,4709347.267216113,"2"],["沈阳市","210100","210000",13740225.751694713,5131825.049450007,"2"],["阿拉善盟","152900","150000",11766832.63311104,4699922.919441479,"2"],["锡林郭勒盟","152500","150000",12923660.66261358,5456700.20897216,"2"],["兴安盟","152200","150000",13588459.325797118,5792816.996955315,"2"],["乌兰察布市","150900","150000",12593988.324587772,5011426.470840497,"2"],["巴彦淖尔市","150800","150000",11958097.886009865,4976496.392192229,"2"],["呼伦贝尔市","150700","150000",13332256.293222003,6310935.776656798,"2"],["鄂尔多斯市","150600","150000",12220836.485889457,4809112.613431188,"2"],["通辽市","150500","150000",13610516.614980862,5406662.2465152275,"2"],["赤峰市","150400","150000",13234481.824109983,5199680.466392178,"2"],["乌海市","150300","150000",11891447.78992619,4820983.504681581,"2"],["包头市","150200","150000",12227348.342142388,4962048.438464467,"2"],["呼和浩特市","150100","150000",12439816.841091592,4989133.276972098,"2"],["吕梁市","141100","140000",12372537.901204426,4511611.545090421,"2"],["临汾市","141000","140000",12414242.078637764,4312729.501224299,"2"],["忻州市","140900","140000",12549522.755865816,4638463.215251172,"2"],["运城市","140800","140000",12357273.77262685,4167465.4353546365,"2"],["晋中市","140700","140000",12551570.143940486,4535324.524295434,"2"],["朔州市","140600","140000",12515976.182037301,4769170.52403149,"2"],["晋城市","140500","140000",12562571.626576604,4230749.657628498,"2"],["长治市","140400","140000",12592050.14093357,4327554.63224839,"2"],["阳泉市","140300","140000",12643730.43717333,4559202.201432565,"2"],["大同市","140200","140000",12612511.5538973,4877041.282064313,"2"],["太原市","140100","140000",12528976.294811118,4561155.538890688,"2"],["衡水市","131100","130000",12876320.268041888,4542614.542324839,"2"],["廊坊市","131000","130000",12991713.38428125,4796560.482500654,"2"],["沧州市","130900","130000",13006416.239986243,4622523.403755558,"2"],["承德市","130800","130000",13129426.615022117,5009118.885487704,"2"],["张家口市","130700","130000",12789226.347474027,4978325.899875594,"2"],["保定市","130600","130000",12853453.686160078,4703652.7743079,"2"],["邢台市","130500","130000",12746621.038762718,4448947.068216981,"2"],["邯郸市","130400","130000",12745368.249213329,4385180.424796131,"2"],["秦皇岛市","130300","130000",13314031.066189326,4856604.660835218,"2"],["唐山市","130200","130000",13155749.333134586,4812379.3604019405,"2"],["石家庄市","130100","130000",12747708.184909806,4585483.818801928,"2"]];SuperMap.OSP.Core.Utility._Provinces=[["新疆","650000","0",9754587.565087136,5433497.603111021,"1",new SuperMap.Bounds(8182245.175984388,4073806.801454747,10729558.619774733,6305857.84130954),"PxinjiangP"],["宁夏","640000","0",11828657.585866282,4646203.109348809,"1",new SuperMap.Bounds(11608602.329661043,4195848.29433561,11984290.805596067,4776507.337970367),"Pningxia"],["青海省","630000","0",11330104.897386795,4386409.225337919,"1",new SuperMap.Bounds(9952426.122597812,3703118.628806323,11474157.216530886,4751596.075346037),"PqinghaiP"],["甘肃省","620000","0",11557893.184658965,4308798.490149477,"1",new SuperMap.Bounds(10276509.44294936,3841260.084389072,12102687.433016524,5281951.656831168),"PgansuP"],["陕西省","610000","0",12128598.157693567,4064730.805406663,"1",new SuperMap.Bounds(11743405.112315122,3725410.568731466,12383806.105340483,4805612.213850344),"Pshan3xiP"],["西藏","540000","0",10143184.203896582,3458257.3863251484,"1",new SuperMap.Bounds(8726952.595139127,3105344.7320313384,11033253.664068004,4367333.237178851),"PxizangP"],["云南省","530000","0",11433527.94010065,2881471.8052730085,"1",new SuperMap.Bounds(10856924.147248913,2408791.196743583,11821876.447765118,3407295.85527447)],["贵州省","520000","0",11878636.029730793,3073335.93936453,"1",new SuperMap.Bounds(11532877.468687901,2829216.9348089923,12196093.168712363,3403183.1510570343),"PguizhouP"],["四川省","510000","0",11585627.545234185,3587526.5919751525,"1",new SuperMap.Bounds(10837724.095435362,3004561.9092526385,12082458.232510587,4071168.093614275),"PsichuanP"],["海南省","460000","0",12219820.695535965,2193370.086219758,"1",new SuperMap.Bounds(12092178.650446657,2056286.5468720456,12361640.613611689,2291760.821598875),"PhainanP"],["广西","450000","0",12058963.14078376,2609869.1392254857,"1",new SuperMap.Bounds(11631004.486627264,2379309.8309491733,12474640.583437977,3046833.4460638743),"PguangxiP"],["广东省","440000","0",12608629.509294868,2647864.2200937327,"1",new SuperMap.Bounds(12207912.181688866,2299895.0479653715,13046104.421441315,2939395.08026818),"PguangdongP"],["湖南省","430000","0",12577271.587974837,3263643.856141877,"1",new SuperMap.Bounds(12110415.009428412,2831154.249030822,12719439.93605674,3519873.5224772114),"Phunan"],["湖北省","420000","0",12728487.538990457,3573870.1242535673,"1",new SuperMap.Bounds(12063333.766631287,3379323.3441394633,12928151.958789123,3931944.9131190707),"Phubei"],["河南省","410000","0",12655610.564550279,4132385.1927034063,"1",new SuperMap.Bounds(12285327.095171232,3682518.8407903584,12985379.973172056,4351141.590494308),"Phenan"],["山东省","370000","0",13026652.564939588,4393148.503876821,"1",new SuperMap.Bounds(12779213.604555134,4079480.437098761,13659857.198163128,4617302.390212271),"PshandongP"],["江西省","360000","0",12902916.498143235,3334245.3825119757,"1",new SuperMap.Bounds(12643657.522906858,2812598.9107587137,13189909.054718392,3513094.3476433214),"Pjiangxi"],["福建省","350000","0",13280015.058068136,3011474.5035582734,"1",new SuperMap.Bounds(12896673.701099545,2700700.0867459746,13407636.397732157,3288476.478899495),"PfujianP"],["安徽省","340000","0",13056112.822900066,3745151.1266401894,"1",new SuperMap.Bounds(12789852.185651267,3425760.9606656474,13319232.358077152,4116504.879783778),"PanhuiP"],["浙江省","330000","0",13375540.65082715,3537938.8783211634,"1",new SuperMap.Bounds(13138779.567319077,3143888.6574096293,13619435.755222201,3655792.4897976937),"PzhejiangP"],["江苏省","320000","0",13220668.7450949,3771343.2153001367,"1",new SuperMap.Bounds(12953260.29257653,3601444.369978476,13572310.095948247,4180975.1942691472),"Pjiangsu"],["黑龙江省","230000","0",14099938.32222803,5739205.612534873,"1",new SuperMap.Bounds(13489855.74911767,5377067.870917978,15038730.208449343,7087961.336748819),"Pheilongjiang"],["吉林省","220000","0",13951238.080384847,5449368.203291962,"1",new SuperMap.Bounds(13540987.35158731,4991547.401000312,14618244.988307253,5829255.2563273525)],["辽宁省","210000","0",13740951.777413666,5136374.087132801,"1",new SuperMap.Bounds(13229977.614873504,4681942.738561824,14002866.501741895,5387175.904378453),"Pliaoning"],["内蒙古","150000","0",12441733.762723051,4985448.194218212,"1",new SuperMap.Bounds(10817222.273496473,4867690.9564971365,13371260.015977317,7045135.949272099),"Pneimenggu"],["山西省","140000","0",12530384.486369655,4561773.779789905,"1",new SuperMap.Bounds(12270435.218970869,4107136.4741885555,12753151.708009595,4974502.077364093),"PshanxiP"],["河北省","130000","0",12742716.173664672,4584517.177225902,"1",new SuperMap.Bounds(12630648.170615302,4307462.309242928,13341930.06829143,5253946.465416467),"PhebeiP"]];SuperMap.OSP.Core.Utility._extend=function(d,e){if(typeof(d)=="function"&&typeof(e)=="function"){var b=function(){};b.prototype=d.prototype;e.prototype=new b();e.prototype.constructor=e;e.uber=d.prototype}else{e=e||{};for(var a in d){if(typeof(e[a])=="undefined"){e[a]=d[a]}if(typeof d[a]==="object"&&d[a]!=null){this._extend(d[a],e[a])}}}return e};SuperMap.OSP.Core.Utility._alert=function(a){alert(a)};SuperMap.OSP.Core.Utility._isEmpty=function(b){var a=true;if(b!=null&&b!==""){a=false}return a};SuperMap.OSP.Core.Utility.getCityCodeByCityName=function(a){var c=null;for(var b=0;b<this._Citys.length;b++){if(a==this._Citys[b][0]){c=this._Citys[b][1];break}}return c};SuperMap.OSP.Core.Utility.getProvinceCodeByCityCode=function(a){return a.substring(0,2)+"0000"};SuperMap.OSP.Core.Utility.getDistrictLevelByDistrictCode=function(a){var b;if(a.substring(2,6)=="0000"){b=1}else{if(a.substring(2,4)=="01"){b=2}else{b=3}}return b};SuperMap.OSP.Core.Utility.getDatesetNameByCityCode=function(c){var d=null;if(c=="110000"){d="PbeijingP"}else{if(c=="120000"){d="PtianjinP"}else{if(c=="310000"){d="PshanghaiP"}else{if(c=="500000"){d="PchongqingP"}else{var b=this.getProvinceCodeByCityCode(c);for(var a=0;a<this._Provinces.length;a++){if(b==this._Provinces[a][1]){d=this._Provinces[a][7];break}}}}}}return d};SuperMap.OSP.Core.Utility.getDatesetNameByCityName=function(b){var d=null;var c=this.getCodeInfoByCityName(b);if(b=="北京市"){d="PbeijingP"}else{if(b=="上海市"){d="PshanghaiP"}else{if(b=="重庆市"){d="PchongqingP"}else{if(b=="天津市"){d="PtianjinP"}else{for(var a=0;a<this._Provinces.length;a++){if(c.provinceCode==this._Provinces[a][1]){d=this._Provinces[a][7];break}}}}}}return d};SuperMap.OSP.Core.Utility.distPtToLine=function(l,m){if(l==null){return false}var h=l.length;var n=new Array();var c=new Array();var g=0,d=0;var e,b;var o;var a;var f;n[0]=(l[0].lon-m.lon)*(l[0].lon-m.lon)+(l[0].lat-m.lat)*(l[0].lat-m.lat);o=Math.sqrt(n[0]);g=0;while(++g<h){if(Math.abs(l[g].lon-m.lon)<o&&Math.abs(l[g].lon-m.lon)<o){n[1]=(l[g].lon-m.lon)*(l[g].lon-m.lon)+(l[g].lat-m.lat)*(l[g].lat-m.lat);if(n[1]==0){return 0}if(n[1]<n[0]){n[0]=n[1]}}}d=0;c[0]=n[0];while(d<h-1){if(l[d]==l[d+1]){d++;continue}if(SuperMap.OSP.Core.Utility._isProjectToLineset(m,l[d],l[d+1])){e=l[d].lat-l[d+1].lat;b=l[d+1].lon-l[d].lon;a=-(e*l[d].lon+b*l[d].lat);c[1]=(e*m.lon)+(b*m.lat)+a;c[1]=c[1]*c[1];c[1]=c[1]/((e*e)+(b*b));if(c[1]<c[0]){c[0]=c[1]}}d++}f=Math.sqrt(c[0]);return f};SuperMap.OSP.Core.Utility._isProjectToLineset=function(e,b,f){if(b.lat==f.lon&&b.lat==f.lat){return true}var a=(e.lon-b.lon)*(e.lon-b.lon)+(e.lat-b.lat)*(e.lat-b.lat);var c=(e.lon-f.lon)*(e.lon-f.lon)+(e.lat-f.lat)*(e.lat-f.lat);var d=(f.lon-b.lon)*(f.lon-b.lon)+(f.lat-b.lat)*(f.lat-b.lat);if(c+d<a||a+d<c){return false}else{return true}};SuperMap.OSP.Core.Utility._geometryToServer6RGeometry=function(g){var e=SuperMap.REST.GeometryType.POINT;var f=new SuperMap.REST.ServerGeometry();if(g.componentTypes[0]=="SuperMap.Geometry.Point"){var a=new SuperMap.Geometry.Point(g.components[0].x,g.components[0].y);e=SuperMap.REST.GeometryType.POINT;f.id=0;f.parts=[1];f.points=[a]}else{if(g.componentTypes[0]=="SuperMap.Geometry.LineString"){e=SuperMap.REST.GeometryType.LINE;f.id=1;f.parts=[];f.points=[];for(var d=0;d<g.components.length;d++){f.parts[d]=0;var c=g.components[d];f.parts[d]=c.components.length;for(var b=0;b<c.components.length;b++){f.points.push(c.components[b])}}}else{if(g.componentTypes[0]=="SuperMap.Geometry.Polygon"){e=SuperMap.REST.GeometryType.REGION;f.id=3;f.parts=[];f.points=[];for(var d=0;d<g.components.length;d++){f.parts[d]=0;var c=g.components[d];f.parts[d]=c.components.length;for(var b=0;b<c.components.length;b++){var a=c.components[b];f.parts[d]=a.components.length;for(k=0;k<a.components.length;k++){f.points.push(a.components[k])}}}}}}return f};SuperMap.OSP.Core.Utility.isPointInPolygon=function(b,a){if(b==null||b.length==0){return false}var c=0;var e;var d;var g=null;var f=null;g=b[0];for(e=1;e<=b.length;e++){f=b[e%b.length];if(a.lat>Math.min(g.lat,f.lat)){if(a.lat<=Math.max(g.lat,f.lat)){if(a.x<=Math.max(g.lon,f.lon)){if(g.lat!=f.lat){d=(a.lat-g.lat)*(f.lon-g.lon)/(f.lat-g.lat)+g.lon;if((g.lon==f.lon)||(a.lon<d)||(a.lon==d)){c++}}}}}g=f}if(c%2==0){return false}else{return true}};SuperMap.OSP.Core.Utility.isAllPointsInPolygon=function(a,c){if(a==null||a.length==0){return true}if(c==null||c.length==0){return true}var d=true;for(var b=0;b<c.length;b++){if(!this.isPointInPolygon(a,c[b])){d=false;break}}return d};SuperMap.OSP.Core.Utility._viewBoundsToPoint2Ds=function(c){var a=[];var d=new SuperMap.Geometry.Point(c.left,c.right);var b=new SuperMap.Geometry.Point(c.top,c.bottom);a.push(d);a.push(new SuperMap.Geometry.Point(c.left,c.bottom));a.push(b);a.push(new SuperMap.Geometry.Point(c.top,c.right));return a};SuperMap.OSP.Core.Utility._getOutRectBounds=function(b){var a=new SuperMap.Geometry.LinearRing(b);var d=new SuperMap.Geometry.Polygon([a]);var c=d.getBounds();return c};SuperMap.OSP.Core.Utility._isFboundsBigEbounds=function(g,f){var c=g.width;var b=g.height;var d=f.width;var a=f.height;var e=false;if(c>=d&&b>=a){e=true}return e};SuperMap.OSP.Core.Utility.adjustView=function(e,c){var d=SuperMap.OSP.Core.Utility._viewBoundsToPoint2Ds(e.getExtent());var a=SuperMap.OSP.Core.Utility.isAllPointsInPolygon(d,c);if(!a){var b=SuperMap.OSP.Core.Utility._getOutRectBounds(c);if(SuperMap.OSP.Core.Utility._isFboundsBigEbounds(e.getExtent(),b)){e.panTo(b.getCenterLonLat())}else{e.zoom(0.5);SuperMap.OSP.Core.Utility.adjustView(e,c)}}};SuperMap.OSP.Core.Utility._addCopy=function(b){var a=document.createElement("div");a.style.position="absolute";a.style.bottom="10px";a.style.right="10px";a.style.zIndex=99999;a.style.fontSize="10px";b.appendChild(a)};SuperMap.OSP.Core.Utility.earthCircumferenceInMeters=40075016.68557849;SuperMap.OSP.Core.Utility.halfEarthCircumferenceInMeters=SuperMap.OSP.Core.Utility.earthCircumferenceInMeters/2;SuperMap.OSP.Core.Utility.earthRadiusInMeters=6378137;SuperMap.OSP.Core.Utility.MercatorLatitudeLimit=85.051128;SuperMap.OSP.Core.Utility.latLonToMeters=function(a){if(a.CLASS_NAME=="SuperMap.Geometry.Point"||a.CLASS_NAME=="SuperMap.OSP.Core.Point2D"||a.x!=null){var c=a.x/180*SuperMap.OSP.Core.Utility.halfEarthCircumferenceInMeters;var b=Math.log(Math.tan((90+a.y)*Math.PI/360))/(Math.PI/180);b=b/180*SuperMap.OSP.Core.Utility.halfEarthCircumferenceInMeters;return new SuperMap.Geometry.Point(c,b)}else{var c=a.lon/180*SuperMap.OSP.Core.Utility.halfEarthCircumferenceInMeters;var b=Math.log(Math.tan((90+a.lat)*Math.PI/360))/(Math.PI/180);b=b/180*SuperMap.OSP.Core.Utility.halfEarthCircumferenceInMeters;return new SuperMap.LonLat(c,b)}};SuperMap.OSP.Core.Utility.metersToLatLon=function(a){if(a.CLASS_NAME=="SuperMap.Geometry.Point"||a.CLASS_NAME=="SuperMap.OSP.Core.Point2D"||a.x!=null){var c=a.x/SuperMap.OSP.Core.Utility.halfEarthCircumferenceInMeters*180;var b=a.y/SuperMap.OSP.Core.Utility.halfEarthCircumferenceInMeters*180;b=180/Math.PI*(2*Math.atan(Math.exp(b*Math.PI/180))-Math.PI/2);return new SuperMap.Geometry.Point(c,b)}else{var c=a.lon/SuperMap.OSP.Core.Utility.halfEarthCircumferenceInMeters*180;var b=a.lat/SuperMap.OSP.Core.Utility.halfEarthCircumferenceInMeters*180;b=180/Math.PI*(2*Math.atan(Math.exp(b*Math.PI/180))-Math.PI/2);return new SuperMap.LonLat(c,b)}};SuperMap.OSP.Core.Utility.committer=function(handler,service,method,params,isSynchronized,onComplete,onError,userContext){var jsonParams=SuperMap.Util.toJSON(params).replace(/\'/g,'"');jsonParams=jsonParams.replace(/%25/g,"%");jsonParams=jsonParams.replace(/%26gt;/g,">");jsonParams=jsonParams.replace(/%26lt;"/g,"<'");jsonParams=jsonParams.replace(/" and/g,"' and");jsonParams=jsonParams.replace(/like "/g,"like '");jsonParams=jsonParams.replace(/="/g,"='");jsonParams=jsonParams.replace(/""/,"'\"");jsonParams=jsonParams.replace(/"","/,'\'","');jsonParams=jsonParams.replace(/":'/g,'":"');if(method=="queryByKeywords"){jsonParams=SuperMap.Util.toJSON(params);jsonParams=jsonParams.replace(/%25/g,"%");jsonParams=jsonParams.replace(/%26gt;/g,">");jsonParams=jsonParams.replace(/%26lt;/g,"<")}var cloudService=new SuperMap.ServiceBase(handler);function onCompleteFun(clientResult){if("function"==typeof(onComplete)){if("undefined"==typeof(clientResult.result)&&"undefined"!=typeof(clientResult.responseText)){clientResult=eval("("+clientResult.responseText+")")}onComplete(clientResult)}}cloudService.request({url:handler,params:{servicename:service,methodname:method,parameter:jsonParams,t:new Date().getTime()},method:"GET",success:onCompleteFun,failure:onError})};SuperMap.Util.committer=function(c){if(!c){return}c.url=window.encodeURI(c.url);var b=c.url,a=b.substr(b.length-1,1);c.isInTheSameDomain=c.isInTheSameDomain||SuperMap.Util.isInTheSameDomain(c.url);if(c.isInTheSameDomain){if(c.method==="GET"&&c.params){var h=c.params,g=SuperMap.Util.getParameterString(h);if(SuperMap.Util.urlIsLong(g)){var e=c.data;c.method="POST";c.url+=(a==="?")?"_method=GET":"&_method=GET";e="{";for(var d in h){e+="'"+d+"':"+encodeURIComponent(h[d])+","}e+="}";c.data=e}else{if(g.length>0){b+=(a==="?")?g:"&"+g}c.url=b}delete c.params}var f=c.headers||{};c.headers=f;switch(c.method){case"GET":SuperMap.Request.GET(c);break;case"POST":f["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8";SuperMap.Request.POST(c);break;case"PUT":c.url+=(a==="?")?"_method=PUT":"&_method=PUT";SuperMap.Request.PUT(c);break;case"DELETE":c.url+=(a==="?")?"_method=DELETE":"&_method=DELETE";SuperMap.Request.POST(c);break}}else{switch(c.method){case"GET":SuperMap.Util.RequestJSONP.GET(c);break;case"POST":c.url+=(a==="?")?"_method=POST":"&_method=POST";SuperMap.Util.RequestJSONP.POST(c);break;case"PUT":c.url+=(a==="?")?"_method=PUT":"&_method=PUT";SuperMap.Util.RequestJSONP.PUT(c);break;case"DELETE":c.url+=(a==="?")?"_method=DELETE":"&_method=DELETE";SuperMap.Util.RequestJSONP.GET(c);break}}};SuperMap.Util.RequestJSONP={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(a){var d=this;for(var b in a){d.queryKeys.push(b);if(typeof a[b]!="string"){a[b]=SuperMap.Util.toJSON(a[b])}var c=encodeURIComponent(a[b]);d.queryValues.push(c)}},issue:function(e){var n=this,l=n.getUid(),b=e.url,q=null,d=null,o=[];if(e.success){q=(e.scope)?SuperMap.Function.bind(e.success,e.scope):e.success}if(e.failure){d=(e.scope)?SuperMap.Function.bind(e.failure,e.scope):e.failure}n.supermap_callbacks[l]=function(r){var i=SuperMap.Util.transformResult(r);i.succeed=i.succeed==undefined?true:i.succeed;if(i.succeed&&q){q(r)}else{if(d){d(r)}}delete n.supermap_callbacks[l]};n.addQueryStrings({jsonp:"SuperMap.Util.RequestJSONP.supermap_callbacks["+l+"]"});var j=n.queryKeys,m=b,g=0;var c=n.queryKeys?n.queryKeys.length:0;for(var f=0;f<c;f++){if(m.length+n.queryKeys[f].length+2>=n.limitLength){if(g==0){return false}if(o==null){o=new Array()}o.push(m);m=b;g=0;f--}else{if(m.length+n.queryKeys[f].length+2+n.queryValues[f].length>n.limitLength){var a=n.queryValues[f];while(a.length>0){var p=n.limitLength-m.length-n.queryKeys[f].length-2;if(m.indexOf("?")>-1){m+="&"}else{m+="?"}var h=a.substring(0,p);if(h.substring(p-1,p)=="%"){p-=1;h=a.substring(0,p)}else{if(h.substring(p-2,p-1)=="%"){p-=2;h=a.substring(0,p)}}h=n.formatValue(h);m+=n.queryKeys[f]+"="+h;a=a.substring(p);if(h.length>0){if(o==null){o=new Array()}o.push(m);m=b;g=0}}}else{g++;if(m.indexOf("?")>-1){m+="&"}else{m+="?"}var h=n.queryValues[f];h=n.formatValue(h);m+=n.queryKeys[f]+"="+h}}}if(o==null){o=new Array()}m!==b&&o.push(m);n.send(o)},formatValue:function(b){var a;a=/#/g;b=b.replace(a,"%23");a=/[+]/g;b=b.replace(a,"%2b");a=/[/]/g;b=b.replace(a,"%2F");a=/&/g;b=b.replace(a,"%26");return b},getUid:function(){var a=new Date().getTime(),b=Math.floor(Math.random()*10000);return a*1000+b},send:function(e){var a=e.length;if(a>0){var f=new Date().getTime();for(var d=0;d<a;d++){var b=document.createElement("script");var c=e[d];if(c.indexOf("?")>-1){c+="&"}else{c+="?"}c+="sectionCount="+a;c+="&sectionIndex="+d;c+="&jsonpUserID="+f;b.setAttribute("src",c);b.setAttribute("type","text/javascript");if(navigator.userAgent.indexOf("IE")>=0){b.onreadystatechange=function(){if(this&&("loaded"==this.readyState||"complete"==this.readyState)){this.onreadystatechange=null;try{document.body.removeChild(this)}catch(g){if(this.parentNode){this.parentNode.removeChild(this)}delete this}}}}else{b.onload=function(){this.onload=null;document.body.removeChild(this)}}document.body.appendChild(b)}}},GET:function(a){var b=this;b.queryKeys.length=0;b.queryValues.length=0;b.addQueryStrings(a.params);b.issue(a)},POST:function(a){var b=this;b.queryKeys.length=0;b.queryValues.length=0;b.addQueryStrings({requestEntity:a.data});b.issue(a)},PUT:function(a){var b=this;b.queryKeys.length=0;b.queryValues.length=0;b.addQueryStrings({requestEntity:a.data});b.issue(a)},DELETE:function(a){var b=this;b.queryKeys.length=0;b.queryValues.length=0;b.addQueryStrings({requestEntity:a.data});b.issue(a)}};SuperMap.OSP.Core.Point2D=function(a,b){if(a||b){if(typeof(a)!="number"||typeof(b)!="number"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.Web.Core.Resources","Point2D_Constructor_ParamsError"))}}if(a==0||a){this.x=a}else{this.x=NaN}if(b==0||b){this.y=b}else{this.y=NaN}};SuperMap.OSP.Core.InfoWindow=SuperMap.Class(SuperMap.Popup.FramedCloud,{autoSize:false,fixedRelativePosition:true,relativePosition:"tr",CLASS_NAME:"SuperMap.OSP.Core.InfoWindow"});SuperMap.OSP.Core._ServiceSuffix="/iserver/cloudhandler?";SuperMap.OSP.Core._ServiceUrl="http://services.supermapcloud.com";SuperMap.OSP.Core._DataSourceName="china_poi";SuperMap.OSP.Core._mapName="quanguo";SuperMap.OSP.Core._cachedUrl="http://t0.supermapcloud.com/FileService/image";SuperMap.OSP.Core._Scales=[1/470000000,1/235000000,1/117500000,1/58750000,1/29375000,1/14687500,1/7343750,1/3671875,1/1835937,1/917968,1/458984,1/229492,1/114746,1/57373,1/28686,1/14343,1/14343,1/7171,1/3585,1/1792];SuperMap.Layer.CloudLayer=SuperMap.Class(SuperMap.CanvasLayer,{name:"CloudLayer",url:"http://t1.supermapcloud.com/FileService/image",initialize:function(a){var b=this;b.url=b.url+"?x=${x}&y=${y}&z=${z}";a=SuperMap.Util.extend({maxExtent:new SuperMap.Bounds(-20037508.342789244,-20037508.3427891,20037508.342789244,20037508.3427891),resolutions:[156543.033928041,78271.5169640203,39135.7584820102,19567.8792410051,9783.93962050254,4891.96981025127,2445.98490512563,1222.99245256282,611.496226281409,305.748113140704,152.874056570352,76.4370282851761,38.218514142588,19.109257071294,9.55462853564701,4.77731426782351,2.38865713391175,1.19432856695588,0.597164283477938]},a);SuperMap.CanvasLayer.prototype.initialize.apply(b,[b.name,b.url,null,a]);b.units="meter"},destroy:function(){var a=this;SuperMap.CanvasLayer.prototype.destroy.apply(a,arguments);a.name=null;a.url=null},clone:function(b){var a=this;if(b==null){b=new SuperMap.Layer.CloudLayer(a.name,a.url,a.layerName,a.getOptions())}b=SuperMap.CanvasLayer.prototype.clone.apply(a,[b]);return b},getTileUrl:function(a){var c=this,b=c.url;return SuperMap.String.format(b,{x:a.x,y:a.y,z:a.z})},CLASS_NAME:"SuperMap.Layer.CloudLayer"});SuperMap.OSP.Service.Resources=SuperMap.Class({initialize:function(){},CLASS_NAME:"SuperMap.OSP.Service.Resources"});SuperMap.OSP.Service.Resources.zh_cn={Geocoder_getPoint_param_geocodeParam_error:"Geocoder的getPoint方法的geocodeParam参数不能为空！",Geocoder_getPoint_param_onComplete_error:"Geocoder的getPoint方法的onComplete参数不能为空,并且类型应为function！",Geocoder_filed_dataHandler_error:"Geocoder服务类的dataHandler属性不能为空！",DataManager_filed_url_error:"DataManager服务类的url属性不能为空！",DataManager_createDataset_param_onComplete_error:"DataManager的createDataset方法的onComplete参数不能为空,并且类型应为function！",DataManager_createDataset_param_dataSourceName_error:"DataManager的createDataset方法的dataSourceName参数不能为空！",DataManager_createDataset_param_name_error:"DataManager的createDataset方法的name参数不能为空！",DataManager_createDataset_param_type_error:"DataManager的createDataset方法的type参数不能为空！",DataManager_deleteDataset_param_dataSourceName_error:"DataManager的deleteDataset方法的dataSourceName参数不能为空！",DataManager_deleteDataset_param_name_error:"DataManager的deleteDataset方法的name参数不能为空！",DataManager_deleteDataset_param_onComplete_error:"DataManager的deleteDataset方法的onComplete参数不能为空,并且类型应为function！",DataManager_renamedataSet_param_dataSourceName_error:"DataManager的renamedataSet方法的dataSourceName参数不能为空！",DataManager_renamedataSet_param_oldName_error:"DataManager的renamedataSet方法的oldName参数不能为空！",DataManager_renamedataSet_param_newName_error:"DataManager的renamedataSet方法的newName参数不能为空！",DataManager_renamedataSet_param_onComplete_error:"DataManager的renamedataSet方法的onComplete参数不能为空,并且类型应为function！",DataManager_getDatasetInfo_param_dataSourceName_error:"DataManager的getDatasetInfo方法的dataSourceName参数不能为空！",DataManager_getDatasetInfo_param_onComplete_error:"DataManager的getDatasetInfo方法的onComplete参数不能为空,并且类型应为function！",DataManager_addField_param_fieldParam_error:"DataManager的addField方法的fieldParam参数不能为空！",DataManager_addField_param_onComplete_error:"DataManager的addField方法的onComplete参数不能为空,并且类型应为function！",DataManager_deleteField_param_deleteFieldParam_error:"DataManager的deleteField方法的deleteFieldParam参数不能为空！",DataManager_deleteField_param_onComplete_error:"DataManager的deleteField方法的onComplete参数不能为空,并且类型应为function！",DataManager_updateField_param_updateFieldParam_error:"DataManager的updateField方法的updateFieldParam参数不能为空！",DataManager_updateField_param_onComplete_error:"DataManager的updateField方法的onComplete参数不能为空,并且类型应为function！",DataManager_updateField_param_updateFieldParam_dataSourceName_error:"DataManager的updateField方法的updateFieldParam属性的dataSourceName参数不能为空！",DataManager_updateField_param_updateFieldParam_datasetName_error:"DataManager的updateField方法的updateFieldParam属性的datasetName参数不能为空！",DataManager_updateField_param_updateFieldParam_oldFieldNames_error:"DataManager的updateField方法的updateFieldParam属性的oldFieldNames参数不能为空！",DataManager_updateField_param_updateFieldParam_newFieldCaptions_error:"DataManager的updateField方法的updateFieldParam属性的newFieldCaptions参数不能为空！",DataManager_addEntity_param_entityParam_error:"DataManager的addEntity方法的entityParam参数不能为空！",DataManager_addEntity_param_onComplete_error:"DataManager的addEntity方法的onComplete参数不能为空,并且类型应为function！",DataManager_addEntity_param_entityParam_dataSourceName_error:"DataManager的addEntity方法的entityParam属性的dataSourceName参数不能为空！",DataManager_addEntity_param_entityParam_datasetName_error:"DataManager的addEntity方法的entityParam属性的datasetName参数不能为空！",DataManager_addEntity_param_entityParam_entities_error:"DataManager的addEntity方法的entityParam属性的entities参数不能为空！",DataManager_deleteEntity_param_entityParam_error:"DataManager的deleteEntity方法的entityParam参数不能为空！",DataManager_deleteEntity_param_onComplete_error:"DataManager的deleteEntity方法的onComplete参数不能为空,并且类型应为function！",DataManager_deleteEntity_param_entityParam_dataSourceName_error:"DataManager的deleteEntity方法的entityParam属性的dataSourceName参数不能为空！",DataManager_deleteEntity_param_entityParam_datasetName_error:"DataManager的deleteEntity方法的entityParam属性的datasetName参数不能为空！",DataManager_deleteEntity_param_entityParam_ids_error:"DataManager的deleteEntity方法的entityParam属性的ids参数不能为空！",DataManager_deleteEntity_param_entityParam_entities_error:"DataManager的deleteEntity方法的entityParam属性的entities参数不能为空！",DataManager_updateEntity_param_entityParam_error:"DataManager的updateEntity方法的entityParam参数不能为空！",DataManager_updateEntity_param_onComplete_error:"DataManager的updateEntity方法的onComplete参数不能为空,并且类型应为function！",DataManager_updateEntity_param_entityParam_dataSourceName_error:"DataManager的updateEntity方法的entityParam属性的dataSourceName参数不能为空！",DataManager_updateEntity_param_entityParam_datasetName_error:"DataManager的updateEntity方法的entityParam属性的datasetName参数不能为空！",DataManager_updateEntity_param_entityParam_ids_error:"DataManager的updateEntity方法的entityParam属性的ids参数不能为空！",DataManager_updateEntity_param_entityParam_entities_error:"DataManager的updateEntity方法的entityParam属性的entities参数不能为空！",DataManager_downloadData_param_entityParam_error:"DataManager的downloadData方法的dataDownloadParam参数不能为空！",DataManager_downloadData_param_onComplete_error:"DataManager的downloadData方法的onComplete参数不能为空,并且类型应为function！",DataManager_downloadData_param_entityParam_targetDatasetNames_error:"DataManager的downloadData方法的dataDownloadParam属性的targetDatasetNames参数不能为空！",DataManager_addField_param_fieldParam_dataSourceName_error:"DataManager的addField方法的fieldParam属性的dataSourceName参数不能为空！",DataManager_addField_param_fieldParam_datasetName_error:"DataManager的addField方法的fieldParam属性的datasetName参数不能为空！",DataManager_addField_param_fieldParam_fieldInfos_error:"DataManager的addField方法的fieldParam属性的fieldInfos参数不能为空！",DataManager_addField_param_fieldParam_fieldInfos_name_error:"DataManager的addField方法的fieldParam属性的fieldInfos的name参数不能为空！",DataManager_addField_param_fieldParam_fieldInfos_caption_error:"DataManager的addField方法的fieldParam属性的fieldInfos的caption参数不能为空！",DataManager_addField_param_fieldParam_fieldInfos_type_error:"DataManager的addField方法的fieldParam属性的fieldInfos的type参数不能为空！",DataManager_deleteField_param_deleteFieldParam_dataSourceName_error:"DataManager的deleteField方法的deleteFieldParam属性的dataSourceName参数不能为空！",DataManager_deleteField_param_deleteFieldParam_datasetName_error:"DataManager的deleteField方法的deleteFieldParam属性的datasetName参数不能为空！",DataManager_deleteField_param_deleteFieldParam_fieldNames_error:"DataManager的deleteField方法的deleteFieldParam属性的fieldNames参数不能为空！",Search_queryByKeywords_param_queryByKeywordsParam_error:"Search的queryByKeywords方法的queryByKeywordsParam参数不能为空！",Search_queryByKeywords_param_onComplete_error:"Search的queryByKeywords方法的onComplete参数不能为空,并且类型应为function！",Search_preConfigSearch_param_searchParamerror:"Search的preConfigSearch方法的searchParam参数不能为空！",Search_preConfigSearch_param_onComplete_error:"Search的preConfigSearch方法的onComplete参数不能为空,并且类型应为function！",Search_queryByBuffer_param_queryByBufferParam_error:"Search的queryByBuffer方法的queryByBufferParam参数不能为空！",Search_queryByBuffer_param_onComplete_error:"Search的queryByBuffer方法的onComplete参数不能为空,并且类型应为function！",Search_preConfigBufferSearch_param_geometry_error:"Search的preConfigBufferSearch方法的geometry参数不能为空！",Search_preConfigBufferSearch_param_bufferAnalystParam_error:"Search的preConfigBufferSearch方法的bufferAnalystParam参数不能为空！",Search_preConfigBufferSearch_param_searchParam_error:"Search的preConfigBufferSearch方法的searchParam参数不能为空！",Search_preConfigBufferSearch_param_onComplete_error:"Search的preConfigBufferSearch方法的onComplete参数不能为空,并且类型应为function！",Search_queryByGeometry_param_queryByGeometryParam_error:"Search的queryByGeometry方法的queryByGeometryParam参数不能为空！",Search_queryByGeometry_param_onComplete_error:"Search的queryByGeometry方法的onComplete参数不能为空,并且类型应为function！",Search_preConfigPolygonSearch_param_points_error:"Search的preConfigPolygonSearch方法的points参数不能为空！",Search_preConfigPolygonSearch_param_searchParam_error:"Search的preConfigPolygonSearch方法的searchParam参数不能为空！",Search_preConfigPolygonSearch_param_onComplete_error:"Search的preConfigPolygonSearch方法的onComplete参数不能为空,并且类型应为function！",Search_filed_url_error:"Search服务类的url属性不能为空！",Search_queryByKeywords_param_queryByKeywordsParam_dataSourceName_error:"Search的queryByKeywords方法的queryByKeywordsParam的dataSourceName属性参数不能为空！",Search_queryByKeywords_param_queryByKeywordsParam_queryParam_error:"Search的queryByKeywords方法的queryByKeywordsParam的queryParam属性参数不能为空！",Search_queryByKeywords_param_queryByKeywordsParam_queryParam_queryDatasetParams_error:"Search的queryByKeywords方法的queryByKeywordsParam的queryParam属性的queryDatasetParams属性参数不能为空！",Search_queryByKeywords_param_queryByKeywordsParam_queryParam_returnResultSetInfo_error:"Search的queryByKeywords方法的queryByKeywordsParam的queryParam属性的returnResultSetInfo属性参数不能为空！",Search_queryByBuffer_param_queryByBufferParam_queryParam_error:"Search的queryByBuffer方法的queryByBufferParam的queryParam属性参数不能为空！",Search_queryByBuffer_param_queryByBufferParam_queryParam_queryDatasetParams_error:"Search的queryByBuffer方法的queryByBufferParam的queryParam属性的queryDatasetParams参数不能为空！",Search_queryByBuffer_param_queryByBufferParam_queryParam_returnResultSetInfo_error:"Search的queryByBuffer方法的queryByBufferParam的queryParam属性的returnResultSetInfo参数不能为空！",Search_queryByBuffer_param_queryByBufferParam_bufferParam_error:"Search的queryByBuffer方法的queryByBufferParam的bufferParam属性的参数不能为空！",Search_queryByBuffer_param_queryByBufferParam_geometry_error:"Search的queryByBuffer方法的queryByBufferParam的属性的geometry参数不能为空！",Search_queryByGeometry_param_queryByGeometryParam_queryParam_error:"Search的queryByGeometry方法的queryByGeometryParam属性的queryParam属性参数不能为空！",Search_queryByGeometry_param_queryByGeometryParam_queryParam_queryDatasetParams_error:"Search的queryByGeometry方法的queryByGeometryParam属性的queryParam属性的queryDatasetParams参数不能为空！",Search_queryByGeometry_param_queryByGeometryParam_queryParam_returnResultSetInfo_error:"Search的queryByGeometry方法的queryByGeometryParam属性的queryParam属性的returnResultSetInfo参数不能为空！",Search_queryByGeometry_param_queryByGeometryParam_geometry_error:"Search的queryByGeometry方法的queryByGeometryParam属性的geometry参数不能为空！",POITypeSearch_getTopTypes_param_onComplete_error:"POITypeSearch的getTopTypes方法的onComplete参数的类型为function！",POITypeSearch_getChildTypes_param_typeCode_error:"POITypeSearch的getChildTypes方法的'typeCode'参数不能为空！",POITypeSearch_getChildTypes_param_onComplete_error:"POITypeSearch的getChildTypes方法的onComplete参数的类型为function",POITypeSearch_getPOIType_param_typeCode_error:"POITypeSearch的getPOIType方法的'typeCode'参数不能为空！",POITypeSearch_getPOIType_param_onComplete_error:"POITypeSearch的getPOIType方法的onComplete参数的类型为function",DistrictSearch_getTopDistricts_param_onComplete_error:"DistrictSearch的getTopDistricts方法的onComplete参数的类型为function",DistrictSearch_getChildDistricts_param_districtCode_error:"DistrictSearch的getChildDistricts方法的'districtCode'参数不能为空！",DistrictSearch_getChildDistricts_param_onComplete_error:"DistrictSearch的getChildDistricts方法的onComplete参数的类型为function",DistrictSearch_getDistrit_param_districtCode_error:"DistrictSearch的getDistrit方法的'districtCode'参数不能为空！",DistrictSearch_getDistrit_param_onComplete_error:"DistrictSearch的getDistrit方法的onComplete参数的类型为function",POISearch_getPois_param_getPOIsParam_error:"POISearch的getPois方法的'getPOIsParam'参数不能为空！",POISearch_getPois_param_onComplete_error:"POISearch的getPois方法的onComplete参数的类型为function",POISearch_getPois_param_getPOIsParam_districtCode_error:"POISearch的getPois方法的'getPOIsParam.districtCode'参数不能为空！",POISearch_getPois_param_getPOIsParam_keyword_error:"POISearch的getPois方法的'getPOIsParam.keyword'参数不能为空！",POISearch_getPOIsByType_param_getPOIsByTypeParam_error:"POISearch的getPOIsByType方法的'getPOIsByTypeParam'参数不能为空！",POISearch_getPOIsByType_param_onComplete_error:"POISearch的getPOIsByType方法的onComplete参数的类型为function",POISearch_getPOIsByType_param_getPOIsByTypeParam_districtCode_error:"POISearch的getPOIsByType方法的'getPOIsByTypeParam.districtCode'参数不能为空！",POISearch_getPOIsByType_param_getPOIsByType_typeCode_error:"POISearch的getPOIsByType方法的'getPOIsByType.typeCode'参数不能为空！",POISearch_getPOIsByGeometry_param_getPOIsByGeometryParam_error:"POISearch的getPOIsByGeometry方法的'getPOIsByGeometryParam'参数不能为空！",POISearch_getPOIsByGeometry_param_onComplete_error:"POISearch的getPOIsByGeometry方法的'onComplete'参数不能为空！",POISearch_getPOIsByGeometry_param_getPOIsByGeometryParam_geometry_error:"POISearch的getPOIsByGeometry方法的'getPOIsByGeometry.geometry'参数不能为空！",POISearch_getPOIsByGeometry_param_getPOIsByGeometryParam_keyword_error:"POISearch的getPOIsByGeometry方法的'getPOIsByGeometry.keyword'参数不能为空！",MapCapturer_getImage_param_url_error:"MapCapturer的getImage方法的url参数不能为空！",MapCapturer_getImage_param_onComplete_error:"MapCapturer的getImage方法的onComplete参数不能为空,并且类型应为function！",MapCapturer_getImage_param_getImageParam_error:"MapCapturer的getImage方法的getImageParam参数不能为空！",PathAnalyst_filed_url_error:"PathAnalyst的url属性不能为空！",PathAnalyst_findPath_param_onComplete_error:"PathAnalyst的findPath方法的onComplete参数不能为空,并且类型应为function！",PathAnalyst_findPath_param_findPathParam_error:"PathAnalyst的findPath方法的findPathParam参数不能为空！",PathAnalyst_findPath_param_findPathParam_dataSourceName_error:"PathAnalyst的findPath方法的findPathParam属性的dataSourceName参数不能为空！",PathAnalyst_findPath_param_findPathParam_networkSetting_error:"PathAnalyst的findPath方法的findPathParam属性的networkSetting参数不能为空！",PathAnalyst_findPath_param_findPathParam_networkSetting_edgeIDField_error:"PathAnalyst的findPath方法的findPathParam属性的networkSetting的edgeIDField参数不能为空！",PathAnalyst_findPath_param_findPathParam_networkSetting_fNodeIDField_error:"PathAnalyst的findPath方法的findPathParam属性的networkSetting的fNodeIDField参数不能为空！",PathAnalyst_findPath_param_findPathParam_networkSetting_networkDatasetName_error:"PathAnalyst的findPath方法的findPathParam属性的networkSetting的networkDatasetName参数不能为空！",PathAnalyst_findPath_param_findPathParam_networkSetting_networkDataSourceName_error:"PathAnalyst的findPath方法的findPathParam属性的networkSetting的networkDataSourceName参数不能为空！",PathAnalyst_findPath_param_findPathParam_networkSetting_nodeIDField_error:"PathAnalyst的findPath方法的findPathParam属性的networkSetting的nodeIDField参数不能为空！",PathAnalyst_findPath_param_findPathParam_networkSetting_tNodeIDField_error:"PathAnalyst的findPath方法的findPathParam属性的networkSetting的tNodeIDField参数不能为空！",PathAnalyst_findPath_param_findPathParam_networkSetting_weightFieldInfos_error:"PathAnalyst的findPath方法的findPathParam属性的networkSetting的weightFieldInfos参数不能为空！",SpatialAnalyst_filed_url_error:"SpatialAnalyst的url属性不能为空！",SpatialAnalyst_bufferAnalyst_param_onComplete_error:"SpatialAnalyst的bufferAnalyst方法的onComplete参数不能为空,并且类型应为function！",SpatialAnalyst_bufferAnalyst_param_bufferAnalystParam_error:"SpatialAnalyst的bufferAnalyst方法的bufferAnalystParam参数不能为空！",SpatialAnalyst_bufferAnalyst_param_geometry_error:"SpatialAnalyst的bufferAnalyst方法的bufferAnalystParam参数的geometry不能为空！",SpatialAnalyst_bufferAnalyst_param_bufferAnalystParam_bufferParam_error:"SpatialAnalyst的bufferAnalyst方法的bufferAnalystParam的bufferParam参数不能为空！",SpatialAnalyst_bufferAnalyst_param_bufferAnalystParam_geometry_error:"SpatialAnalyst的bufferAnalyst方法的bufferAnalystParam的geometry参数不能为空！",SpatialAnalyst_isMultiPointInRegion_param_onComplete_error:"SpatialAnalyst的isMultiPointInRegion方法的onComplete参数不能为空,并且类型应为function！",SpatialAnalyst_isMultiPointInRegion_param_points_error:"SpatialAnalyst的isMultiPointInRegion方法的points参数不能为空！",SpatialAnalyst_isMultiPointInRegion_param_region_error:"SpatialAnalyst的isMultiPointInRegion方法的region参数不能为空！",TraficTransferService_findBusLineByName_param_name_error:"TraficTransferService的findBusLineByName方法的name参数不能为空！",TraficTransferService_findBusLineByName_param_onComplete_error:"TraficTransferService的findBusLineByName方法的onComplete参数不能为空,并且类型应为function！",TraficTransferService_findBusStopByName_param_name_error:"TraficTransferService的findBusStopByName方法的name参数不能为空！",TraficTransferService_findBusStopByName_param_onComplete_error:"TraficTransferService的findBusStopByName方法的onComplete参数不能为空,并且类型应为function！",TraficTransferService_findBusLineByBusStopId_param_stopId_error:"TraficTransferService的findBusLineByBusStopId方法的stopId参数不能为空！",TraficTransferService_findBusLineByBusStopId_param_onComplete_error:"TraficTransferService的findBusLineByBusStopId方法的onComplete参数不能为空,并且类型应为function！",TraficTransferService_busTransferByAddress_param_startAddress_error:"TraficTransferService的busTransferByAddress方法的startAddress参数不能为空！",TraficTransferService_busTransferByAddress_param_endAddress_error:"TraficTransferService的busTransferByAddress方法的endAddress参数不能为空！",TraficTransferService_busTransferByAddress_param_busTransferParameter_error:"TraficTransferService的busTransferByAddress方法的busTransferParameter参数不能为空！",TraficTransferService_busTransferByAddress_param_onComplete_error:"TraficTransferService的busTransferByAddress方法的onComplete参数不能为空,并且类型应为function！",TraficTransferService_busTransferByBusStopId_param_startStopId_error:"TraficTransferService的busTransferByBusStopId方法的startStopId参数不能为空！",TraficTransferService_busTransferByBusStopId_param_endStopId_error:"TraficTransferService的busTransferByBusStopId方法的endStopId参数不能为空！",TraficTransferService_busTransferByBusStopId_param_busTransferParameter_error:"TraficTransferService的busTransferByBusStopId方法的busTransferParameter参数不能为空！",TraficTransferService_busTransferByBusStopId_param_onComplete_error:"TraficTransferService的busTransferByBusStopId方法的onComplete参数不能为空,并且类型应为function！",TraficTransferService_filed_dataHandler_error:"TraficTransferService服务类的dataHandler属性不能为空！",TransportationAnalyst_findPath_param_findPathParameters_error:"交通分析的参数findPathParameters为空或不是对象！",TransportationAnalyst_findPath_param_onComplete_error:"TransportationAnalyst的findPath方法的onComplete参数不能为空,并且类型应为function！",TransportationAnalyst_findPath_param_findPathParameters_nodes_error:"交通分析的参数findPathParameters中的节点数据为空或不是对象！",TransportationAnalyst_findPath_param_nodes_count_error:"交通分析的节点数据不能少于2个！",TransportationAnalyst_findPath_param_Parameter_error:"交通网络分析通用参数为空或不是对象！",TransportationAnalyst_findPath_param_Parameter_resultSetting_error:"交通网络分析结果参数TransportationAnalystResultSetting为空或不是对象！",TransportationAnalyst_filed_url_error:"交通网络分析TransportationAnalyst的url属性不能为空！"};SuperMap.OSP.Service.DataParam=SuperMap.Class({initialize:function(){},dataSourceName:null,fieldExpressions:null,fieldFilters:null,returnFieldNames:null,customRegions:null,regionDatasetName:null,ids:null,CLASS_NAME:"SuperMap.OSP.Service.DataParam"});SuperMap.OSP.Service=SuperMap.OSP.Service||{};SuperMap.OSP.Service.ClientStateInfo=SuperMap.Class({initialize:function(){},viewBounds:null,mapName:null,mapScale:null,features:null,poiGroups:null,userDefinedParam:{},CLASS_NAME:"SuperMap.OSP.Service.ClientStateInfo"});SuperMap.OSP.Service.TiledCachedIServerLayerInfo=SuperMap.Class({initialize:function(){},mapName:null,CLASS_NAME:"SuperMap.OSP.Service.TiledCachedIServerLayerInfo"});SuperMap.OSP.Service.TiledCachedLayerInfo=SuperMap.Class({initialize:function(){},mapName:null,isVisible:true,CLASS_NAME:"SuperMap.OSP.Service.TiledCachedLayerInfo"});SuperMap.OSP.Service.FeatureInfo=SuperMap.Class({initialize:function(){},geometry:null,style:null,id:-1,CLASS_NAME:"SuperMap.OSP.Service.FeatureInfo"});SuperMap.OSP.Service.ErrorResult=SuperMap.Class({initialize:function(){},type:null,information:null,CLASS_NAME:"SuperMap.OSP.Service.ErrorResult"});SuperMap.OSP.Service.MapCapturer=SuperMap.Class({initialize:function(){},image2:false,map:null,maphandler:null,url:null,getImage:function(h,w,e){if(SuperMap.OSP.Core.Utility._isEmpty(h)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","MapCapturer_getImage_param_getImageParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(w)||typeof(w)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","MapCapturer_getImage_param_onComplete_error"));return false}function v(i){if(i){if(i.error&&typeof(e)=="function"){e(i.error)}}w(i.result[0])}function r(i){if(typeof(e)=="function"){var j=new SuperMap.OSP.Service.ErrorResult;j.type=SuperMap.OSP.Core.ErrorType.ENVIRONMENT;j.information=i;e(j)}}if(h!=null&&h!=""){var a=h.mapScale;var g=h.viewBounds;g.leftBottom=new SuperMap.OSP.Core.Point2D(g.left,g.bottom);g.rightTop=new SuperMap.OSP.Core.Point2D(g.right,g.top);h.viewBounds={leftBottom:g.leftBottom,rightTop:g.rightTop};var x=new SuperMap.OSP.Core.Point2D(g.left,g.top);var q=new SuperMap.OSP.Core.Point2D(g.right,g.bottom);var c=[x,new SuperMap.OSP.Core.Point2D(g.right,g.top),q,new SuperMap.OSP.Core.Point2D(g.left,g.bottom)];if(h.poiGroups&&h.poiGroups.length>0){var f=h.poiGroups;var p=[];for(var u=0;u<f.length;u++){if(f[u]&&f[u].visible){var n=[];var l=f[u].pois;var m=f[u].scaledContents;if(m&&m._size&&m._size>0){m=m.get(a);f[u].scaledContents=null;f[u].scaledContents=m}for(var t=0;t<l.length;t++){var o=l[t];if(o){if(SuperMap.OSP.Core.Utility.isPointInPolygon(c,o.position)&&o.visible){o._events=null;o._eventNames=null;o.properties=null;var b=o.scaledContents;if(b&&b._size&&b._size>0){b=b.get(a)}n.push(o)}}}f[u].pois=n;p.push(f[u])}}h.poiGroups=p}if(h.features&&h.features.length>0){var d=h.features;for(var u=0;u<d.length;u++){var s=SuperMap.OSP.Core.Utility._geometryToServer6RGeometry(d[u].geometry);d[u].geometry=null;d[u].geometry=s}}h.userDefinedParam=null}if(this.url){this.url=this.url+SuperMap.OSP.Core._ServiceSuffix}else{throw new Error(SuperMap.Web.Resources.Resource.getMessage("SuperMap.OSP.Service.Resources","MapCapturer_getImage_param_url_error"));return false}SuperMap.OSP.Core.Utility.committer(this.url,"MapCapturer","",h,false,v,r)},_getImage2:function(g,d){var a=d;var f=g.get_center().x;var c=g.get_center().y;var b=g.get_scale();var e="png";a+="?";a+="method=getimage";a+="&mapName="+mapName;a+="&width="+g.get_width();a+="&height="+g.get_height();a+="&mapCenterX="+f;a+="&mapCenterY="+c;a+="&imageFormat="+e;a+="&mapScale="+b;a+="&layersKey=0";a+="&t="+new Date().getTime();return a},CLASS_NAME:"SuperMap.OSP.Service.MapCapturer"});SuperMap.OSP.Service.ImageFormat=SuperMap.Class({initialize:function(){},CLASS_NAME:"SuperMap.OSP.Service.ImageFormat"});SuperMap.OSP.Service.ImageFormat.PNG=0;SuperMap.OSP.Service.ImageFormat.JPG=1;SuperMap.OSP.Service.ImageFormat.GIS=1;SuperMap.OSP.Service.GetImageParam=SuperMap.Class({initialize:function(){},imageFormat:SuperMap.OSP.Service.ImageFormat.PNG,picWidth:500,CLASS_NAME:"SuperMap.OSP.Service.GetImageParam"});SuperMap.OSP.Service.DataManager=SuperMap.Class({initialize:function(){},url:null,createDataset:function(d,a,b,e,c,g){if(SuperMap.OSP.Core.Utility._isEmpty(d)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_createDataset_param_dataSourceName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_createDataset_param_name_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(b)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_createDataset_param_type_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(e)||typeof(e)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_createDataset_param_onComplete_error"));return false}var f={dataSourceName:d,name:a,type:b};this._queryBase("createDataset",f,e,c,g)},deleteDataset:function(c,a,d,b,f){if(SuperMap.OSP.Core.Utility._isEmpty(c)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteDataset_param_dataSourceName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteDataset_param_name_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(d)||typeof(d)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteDataset_param_onComplete_error"));return false}var e={dataSourceName:c,name:a};this._queryBase("deleteDataset",e,d,b,f)},renamedataSet:function(d,b,a,e,c,g){if(SuperMap.OSP.Core.Utility._isEmpty(d)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_renamedataSet_param_dataSourceName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(b)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_renamedataSet_param_oldName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_renamedataSet_param_newName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(e)||typeof(e)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_renamedataSet_param_onComplete_error"));return false}var f={dataSourceName:d,oldName:b,newName:a};this._queryBase("renamedataSet",f,e,c,g)},getDatasetInfo:function(b,c,a,e){if(SuperMap.OSP.Core.Utility._isEmpty(b)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_getDatasetInfo_param_dataSourceName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c)||typeof(c)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_getDatasetInfo_param_onComplete_error"));return false}var d={dataSourceName:b};this._queryBase("getDatasetInfo",d,c,a,e)},addField:function(c,b,a,d){if(SuperMap.OSP.Core.Utility._isEmpty(c)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_addField_param_fieldParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(b)||typeof(b)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_addField_param_onComplete_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c.dataSourceName)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_addField_param_fieldParam_dataSourceName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c.datasetName)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_addField_param_fieldParam_datasetName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c.fieldInfos)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_addField_param_fieldParam_fieldInfos_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c.fieldInfos.name)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_addField_param_fieldParam_fieldInfos_name_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c.fieldInfos.caption)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_addField_param_fieldParam_fieldInfos_caption_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c.fieldInfos.type)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_addField_param_fieldParam_fieldInfos_type_error"));return false}this._queryBase("addField",c,b,a,d)},deleteField:function(a,c,b,d){if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteField_param_deleteFieldParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c)||typeof(c)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteField_param_onComplete_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.dataSourceName)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteField_param_deleteFieldParam_dataSourceName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.datasetName)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteField_param_deleteFieldParam_datasetName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.fieldNames)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteField_param_deleteFieldParam_fieldNames_error"));return false}this._queryBase("deleteField",a,c,b,d)},updateField:function(a,c,b,d){if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_updateField_param_updateFieldParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c)||typeof(c)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_updateField_param_onComplete_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.dataSourceName)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_updateField_param_updateFieldParam_dataSourceName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.datasetName)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_updateField_param_updateFieldParam_datasetName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.oldFieldNames)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_updateField_param_updateFieldParam_oldFieldNames_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.newFieldCaptions)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_updateField_param_updateFieldParam_newFieldCaptions_error"));return false}this._queryBase("updateField",a,c,b,d)},addEntity:function(){if(SuperMap.OSP.Core.Utility._isEmpty(entityParam)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_addEntity_param_entityParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(onComplete)||typeof(onComplete)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_addEntity_param_onComplete_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(entityParam.dataSourceName)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_addEntity_param_entityParam_dataSourceName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(entityParam.datasetName)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_addEntity_param_entityParam_datasetName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(entityParam.entities)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_addEntity_param_entityParam_entities_error"));return false}this._queryBase("addEntity",entityParam,onComplete,onError,userContext)},deleteEntity:function(a,c,b,d){if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteEntity_param_entityParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c)||typeof(c)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteEntity_param_onComplete_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.dataSourceName)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteEntity_param_entityParam_dataSourceName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.datasetName)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteEntity_param_entityParam_datasetName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.ids)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteEntity_param_entityParam_ids_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.entities)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteEntity_param_entityParam_entities_error"));return false}this._queryBase("deleteEntity",a,c,b,d)},getEntitiesByIds:function(c,e,a,d,b,g){if(SuperMap.OSP.Core.Utility._isEmpty(c)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteEntity_param_entityParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(e)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteEntity_param_entityParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteEntity_param_entityParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(d)||typeof(d)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteEntity_param_onComplete_error"));return false}var f={dataSourceName:c,datasetName:e,ids:a};this._queryBase("getEntitiesByIds",f,d,b,g)},getEntities:function(b,d,c,a,f){if(SuperMap.OSP.Core.Utility._isEmpty(b)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteEntity_param_entityParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(d)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteEntity_param_entityParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c)||typeof(c)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_deleteEntity_param_onComplete_error"));return false}var e={dataSourceName:b,datasetName:d};this._queryBase("getEntities",e,c,a,f)},updateEntity:function(a,c,b,d){if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_updateEntity_param_entityParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c)||typeof(c)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_updateEntity_param_onComplete_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.dataSourceName)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_updateEntity_param_entityParam_dataSourceName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.datasetName)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_updateEntity_param_entityParam_datasetName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.ids)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_updateEntity_param_entityParam_ids_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.entities)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_updateEntity_param_entityParam_entities_error"));return false}this._queryBase("updateEntity",a,c,b,d)},downloadData:function(a,c,b,d){if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_downloadData_param_entityParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c)||typeof(c)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_downloadData_param_onComplete_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.targetDatasetNames)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_downloadData_param_entityParam_targetDatasetNames_error"));return false}this._queryBase("downloadData",a,c,b,d)},_queryBase:function(b,f,e,d,g){if(SuperMap.OSP.Core.Utility._isEmpty(this.url)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DataManager_filed_url_error"));return false}this.dataHandler=this.url+SuperMap.OSP.Core._ServiceSuffix;function a(h){if(h){if(h.error&&typeof(d)=="function"){d(h.error)}}e(h.result[0])}function c(h){if(typeof(d)=="function"){var i=new SuperMap.OSP.Service.ErrorResult;i.type=SuperMap.OSP.Core.ErrorType.ENVIRONMENT;i.information=h;d(i)}}SuperMap.OSP.Core.Utility.committer(this.dataHandler,"DataManager",b,f,false,a,c,g)},CLASS_NAME:"SuperMap.OSP.Service.DataManager"});SuperMap.OSP.Service.DeleteFieldParam=SuperMap.Class({initialize:function(){},dataSourceName:null,datasetName:null,fieldNames:null,CLASS_NAME:"SuperMap.OSP.Service.DeleteFieldParam"});SuperMap.OSP.Service.UpdateFieldParam=SuperMap.Class({initialize:function(){},dataSourceName:null,datasetName:null,oldFieldNames:null,newFieldCaptions:null,CLASS_NAME:"SuperMap.OSP.Service.UpdateFieldParam"});SuperMap.OSP.Service.EntityParam=SuperMap.Class({initialize:function(){},dataSourceName:null,datasetName:null,ids:null,entities:null,CLASS_NAME:"SuperMap.OSP.Service.EntityParam"});SuperMap.OSP.Service.FieldInfo=SuperMap.Class({initialize:function(){},name:null,caption:null,type:null,maxLength:50,defaultValue:null,isRequest:false,CLASS_NAME:"SuperMap.OSP.Service.FieldInfo"});SuperMap.OSP.Service.FieldParam=SuperMap.Class({initialize:function(){},dataSourceName:null,datasetName:null,fieldInfos:null,CLASS_NAME:"SuperMap.OSP.Service.FieldParam"});SuperMap.OSP.Service.FieldType=SuperMap.Class({initialize:function(){},CLASS_NAME:"SuperMap.OSP.Service.FieldType"});SuperMap.OSP.Service.FieldType.INT16=0;SuperMap.OSP.Service.FieldType.INT32=1;SuperMap.OSP.Service.FieldType.SINGLE=2;SuperMap.OSP.Service.FieldType.DOUBLE=3;SuperMap.OSP.Service.FieldType.NVARCHAR=4;SuperMap.OSP.Service.FieldType.BOOLEAN=5;SuperMap.OSP.Service.FieldType.TEXT=6;SuperMap.OSP.Service.FieldType.DATETIME=7;SuperMap.OSP.Service.FormatType=SuperMap.Class({initialize:function(){},CLASS_NAME:"SuperMap.OSP.Service.FormatType"});SuperMap.OSP.Service.FormatType.BMP=0;SuperMap.OSP.Service.FormatType.DWG=1;SuperMap.OSP.Service.FormatType.DXF=2;SuperMap.OSP.Service.FormatType.GIF=3;SuperMap.OSP.Service.FormatType.JPG=4;SuperMap.OSP.Service.FormatType.PNG=5;SuperMap.OSP.Service.FormatType.TIF=6;SuperMap.OSP.Service.DataDownloadParam=SuperMap.Class({initialize:function(){},targetDatasetNames:null,formatType:null,CLASS_NAME:"SuperMap.OSP.Service.DataDownloadParam"});SuperMap.OSP.Service.Search=SuperMap.Class({initialize:function(){},url:null,queryByKeywords:function(b,d,c,e){if(SuperMap.OSP.Core.Utility._isEmpty(b)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByKeywords_param_queryByKeywordsParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(d)||typeof(d)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByKeywords_param_onComplete_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(b.dataSourceName)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByKeywords_param_queryByKeywordsParam_dataSourceName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(b.queryParam)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByKeywords_param_queryByKeywordsParam_queryParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(b.queryParam.queryDatasetParams)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByKeywords_param_queryByKeywordsParam_queryParam_queryDatasetParams_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(b.queryParam.returnResultSetInfo)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByKeywords_param_queryByKeywordsParam_queryParam_returnResultSetInfo_error"));return false}function a(g){if(g&&g.currentCount>0){for(var m=0;m<g.records.length;m++){var h=g.records[m];if(h.shape){var f=new Array();for(var l=0;l<h.shape.point2Ds.length;l++){f.push(new SuperMap.Geometry.Point(h.shape.point2Ds[l].x,h.shape.point2Ds[l].y))}h.shape.point2Ds=f;if(h.center){h.center=new SuperMap.OSP.Core.Point2D(h.center.x,h.center.y)}}}}d(g)}this._queryBase("queryByKeywords",b,a,c,e)},queryByBuffer:function(b,d,c,e){if(SuperMap.OSP.Core.Utility._isEmpty(b)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByBuffer_param_queryByBufferParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(d)||typeof(d)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByBuffer_param_onComplete_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(b.queryParam)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByBuffer_param_queryByBufferParam_queryParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(b.queryParam.queryDatasetParams)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByBuffer_param_queryByBufferParam_queryParam_queryDatasetParams_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(b.queryParam.returnResultSetInfo)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByBuffer_param_queryByBufferParam_queryParam_returnResultSetInfo_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(b.bufferParam)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByBuffer_param_queryByBufferParam_bufferParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(b.geometry)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByBuffer_param_queryByBufferParam_geometry_error"));return false}function a(f){if(f&&f.bufferAnalystResult&&f.bufferAnalystResult.shape){var h=f.bufferAnalystResult.shape;f.bufferAnalystResult.shape=SuperMap.OSP.Core.Utility._server2GeometryToClientGeometry(h)}if(f&&f.currentCount>0){for(var j=0;j<f.records.length;j++){var g=f.records[j];if(g.shape){g.shape=SuperMap.OSP.Core.Utility._server2GeometryToClientGeometry(g.shape);if(g.center){g.center=new SuperMap.Geometry.Point(g.center.x,g.center.y)}}}}d(f)}this._queryBase("queryByBuffer",b,a,c,e)},queryByGeometry:function(c,d,b,e){if(SuperMap.OSP.Core.Utility._isEmpty(c)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByGeometry_param_queryByGeometryParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(d)||typeof(d)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByGeometry_param_onComplete_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c.queryParam)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByGeometry_param_queryByGeometryParam_queryParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c.queryParam.queryDatasetParams)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByGeometry_param_queryByGeometryParam_queryParam_queryDatasetParams_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c.queryParam.returnResultSetInfo)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByGeometry_param_queryByGeometryParam_queryParam_returnResultSetInfo_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c.geometry)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByGeometry_param_queryByGeometryParam_geometry_error"));return false}function a(g){if(g&&g.currentCount>0){for(var m=0;m<g.records.length;m++){var h=g.records[m];if(h.shape){var f=new Array();for(var l=0;l<h.shape.point2Ds.length;l++){f.push(new SuperMap.Geometry.Point(h.shape.point2Ds[l].x,h.shape.point2Ds[l].y))}h.shape.point2Ds=f;if(h.center){h.center=new SuperMap.OSP.Core.Point2D(h.center.x,h.center.y)}}}}d(g)}this._queryBase("queryByGeometry",c,a,b,e)},latlonToAddress:function(c,d,b,e){if(SuperMap.OSP.Core.Utility._isEmpty(c)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_latlonToAddress_param_findAddressParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c.geometry)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_latlonToAddress_param_findAddressParam_geometry_error"));return false}if(c.geometry){c.geometry=SuperMap.OSP.Core.Utility._geometryToServer2Geometry(c.geometry)}function a(g){if(g&&g.currentCount>0){for(var m=0;m<g.records.length;m++){var h=g.records[m];if(h.shape){var f=new Array();for(var l=0;l<h.shape.point2Ds.length;l++){f.push(new SuperMap.Geometry.Point(h.shape.point2Ds[l].x,h.shape.point2Ds[l].y))}h.shape.point2Ds=f;if(h.center){h.center=new SuperMap.OSP.Core.Point2D(h.center.x,h.center.y)}}}}d(g)}this._queryBase("latlonToAddress",c,a,b,e)},_queryBase:function(b,f,e,d,g){if(SuperMap.OSP.Core.Utility._isEmpty(this.url)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_filed_url_error"));return false}this.dataHandler=this.url+SuperMap.OSP.Core._ServiceSuffix;function a(h){if(h){if(h.error&&typeof(d)=="function"){d(h.error);return false}}e(h.result[0])}function c(h){if(typeof(d)=="function"){var i=new SuperMap.OSP.Service.ErrorResult;i.type=SuperMap.OSP.Core.ErrorType.ENVIRONMENT;i.information=h;d(i)}}SuperMap.OSP.Core.Utility.committer(this.dataHandler,"Search",b,f,false,a,c,g)},CLASS_NAME:"SuperMap.OSP.Service.Search"});SuperMap.OSP.Service.QueryByBufferParam=SuperMap.Class({initialize:function(){},dataSourceName:null,queryParam:null,bufferParam:null,geometry:null,queryMode:SuperMap.REST.SpatialQueryMode.INTERSECT,returnBufferAnalsyResult:false,CLASS_NAME:"SuperMap.OSP.Service.QueryByBufferParam"});SuperMap.OSP.Service.QueryByGeometryParam=SuperMap.Class({initialize:function(){},dataSourceName:null,queryParam:null,geometry:null,queryMode:SuperMap.REST.SpatialQueryMode.INTERSECT,CALSS_NAME:"SuperMap.OSP.Service.QueryByGeometryParam"});SuperMap.OSP.Service.QueryByKeywordsParam=SuperMap.Class({initialize:function(){},dataSourceName:null,queryParam:null,queryType:0,CLASS_NAME:"SuperMap.OSP.Service.QueryByKeywordsParam"});SuperMap.OSP.Service.QueryParam=SuperMap.Class({initialize:function(){},queryDatasetParams:null,returnResultSetInfo:SuperMap.REST.QueryOption.ATTRIBUTE,startRecord:0,expectCount:10,sortPriorityType:-1,CLASS_NAME:"SuperMap.OSP.Service.QueryParam"});SuperMap.OSP.Service.QueryDatasetParam=SuperMap.Class({initialize:function(){},name:null,sqlParam:null,CLASS_NAME:"SuperMap.OSP.Service.QueryDatasetParam"});SuperMap.OSP.Service.SqlParam=SuperMap.Class({initialize:function(){},groupClause:null,ids:null,returnFields:null,sortClause:null,attributeFilter:null,joinItems:null,linkItems:null,CLASS_NAME:"SuperMap.OSP.Service.SqlParam"});SuperMap.OSP.Service.JoinItem=SuperMap.Class({initialize:function(){},foreignTableName:null,joinFilter:null,joinType:null,CLASS_NAME:"SuperMap.OSP.Service.JoinItem"});SuperMap.OSP.Service.QueryResult=SuperMap.Class({initialize:function(){},dataSourceName:null,currentCount:0,records:null,totalCount:0,CLASS_NAME:"SuperMap.OSP.Service.QueryResult"});SuperMap.OSP.Service.QueryBufferResult=SuperMap.Class({initialize:function(){},bufferAnalystResult:null,CLASS_NAME:"SuperMap.OSP.Service.QueryBufferResult"});SuperMap.OSP.Service.Record=SuperMap.Class({initialize:function(){},datasetName:null,returnFieldCaptions:null,fields:null,fieldTypes:null,center:null,fieldValues:null,shape:null,thirdPartyInfo:null,CLASS_NAME:"SuperMap.OSP.Service.Record"});SuperMap.OSP.Service.JoinType=SuperMap.Class({initialize:function(){},CLASS_NAME:"SuperMap.OSP.Service.JoinType"});SuperMap.OSP.Service.JoinType.INNERJOIN=0;SuperMap.OSP.Service.JoinType.LEFTJOIN=1;SuperMap.OSP.Service.SortPriorityType=SuperMap.Class({initialize:function(){},CLASS_NAME:"SuperMap.OSP.Service.SortPriorityType"});SuperMap.OSP.Service.SortPriorityType.DISTANCE=0;SuperMap.OSP.Service.SortPriorityType.FEE=1;SuperMap.OSP.Service.LinkItem=SuperMap.Class({initialize:function(){},dataSourceConnectionInfo:null,foreignKeys:null,foreignTable:null,linkFields:null,linkFilter:null,name:null,primaryKeys:null,CLASS_NAME:"SuperMap.OSP.Service.LinkItem"});SuperMap.OSP.Service.DataSourceConnectionInfo=SuperMap.Class({initialize:function(){},alias:null,connect:null,driver:null,engineType:null,exclusive:null,openLinkTable:null,password:null,readOnly:null,server:null,user:null,CLASS_NAME:"SuperMap.OSP.Service.DataSourceConnectionInfo"});SuperMap.OSP.Service.POIInfo=SuperMap.Class({initialize:function(){},code:null,name:null,pinYin:null,zipCode:null,address:null,telephone:null,x:0,y:0,thirdPartyInfo:null,CLASS_NAME:"SuperMap.OSP.Service.POIInfo"});SuperMap.OSP.Service.SearchMode=SuperMap.Class({initialize:function(){},CLASS_NAME:"SuperMap.OSP.Service.SearchMode"});SuperMap.OSP.Service.SearchMode.EQUAL=0;SuperMap.OSP.Service.SearchMode.FUZZY=1;SuperMap.OSP.Service.GetPOIsParam=SuperMap.Class({districtCode:null,districtLevel:null,keyword:null,classification:"",startRecord:0,expectCount:10,coordinate:"m",searchMode:SuperMap.OSP.Service.SearchMode.FUZZY,initialize:function(){},CLASS_NAME:"SuperMap.OSP.Service.GetPOIsParam"});SuperMap.OSP.Service.GetPOIsByTypeParam=SuperMap.Class({initialize:function(){},districtCode:null,districtLevel:null,keyword:"",startRecord:0,expectCount:10,typeCode:null,typeLevel:null,coordinate:"m",max_x:NaN,max_y:NaN,min_x:NaN,min_y:NaN,CLASS_NAME:"SuperMap.OSP.Service.GetPOIsByTypeParam"});SuperMap.OSP.Service.GetPOIsByGeometryParam=SuperMap.Class({initialize:function(){},geometry:null,keyword:"",classification:"",startRecord:0,expectCount:10,dataSourceName:"",datasetName:"",coordinate:"m",way:"0",CLASS_NAME:"SuperMap.OSP.Service.GetPOIsByGeometryParam"});SuperMap.OSP.Service.BufferSearchParam=SuperMap.Class({initialize:function(){},geometry:null,typeName:"",startRecord:0,expectCount:10,dataSourceName:"",datasetName:"",coordinate:"m",CLASS_NAME:"SuperMap.OSP.Service.BufferSearchParam"});SuperMap.OSP.Service.findAddressParam=SuperMap.Class({initialize:function(){},geometry:null,startRecord:0,expectCount:10,dataSourceName:"",datasetName:"",CLASS_NAME:"SuperMap.OSP.Service.findAddressParam"});SuperMap.OSP.Service.POISearchResult=SuperMap.Class({initialize:function(){},currentCount:0,records:null,totalCount:0,CLASS_NAME:"SuperMap.OSP.Service.POISearchResult"});SuperMap.OSP.Service.POISearch=SuperMap.Class({initialize:function(){this.search=new SuperMap.OSP.Service.Search()},getPois:function(h,g,f){if(SuperMap.OSP.Core.Utility._isEmpty(h)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POISearch_getPois_param_getPOIsParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(g)||typeof(g)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POISearch_getPois_param_onComplete_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(h.districtCode)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POISearch_getPois_param_getPOIsParam_districtCode_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(h.keyword)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POISearch_getPois_param_getPOIsParam_keyword_error"));return false}var e=new SuperMap.OSP.Service.QueryParam();e.expectCount=h.expectCount;e.startRecord=h.startRecord;e.returnResultSetInfo=SuperMap.REST.QueryOption.ATTRIBUTE;var b=new SuperMap.OSP.Service.QueryDatasetParam();b.name=h.datasetName;b.sqlParam=new SuperMap.OSP.Service.SqlParam();if(h.coordinate=="m"||h.coordinate=="M"){b.sqlParam.returnFields=["SMID","SMX","SMY","Name","PY","POI_ID","ZipCode","Address","Telephone","Admincode"]}else{if(h.coordinate=="l"||h.coordinate=="L"){b.sqlParam.returnFields=["SMID","SMLLX","SMLLY","Name","PY","POI_ID","ZipCode","Address","Telephone","Admincode"]}}var a="";switch(h.districtLevel){case 0:a=" and admincode>='0' and admincode<'999999'";break;case 1:a=" and admincode>='"+h.districtCode+"' and admincode<'"+(parseInt(h.districtCode)+10000)+"'";break;case 2:a=" and admincode>='"+h.districtCode+"' and admincode<'"+(parseInt(h.districtCode)+100)+"'";break;case 3:a=" and ThirdAdminCode='"+h.districtCode+"'";break}if(h.max_x&&h.max_y&&h.min_x&&h.min_y){a+=" and x<'"+h.max_x+"'";a+=" and x>'"+h.min_x+"'";a+=" and y<'"+h.max_y+"'";a+=" and y>'"+h.min_y+"'"}if(h.searchMode==SuperMap.OSP.Service.SearchMode.EQUA){b.sqlParam.attributeFilter="Name='"+h.keyword+"'"+a}else{b.sqlParam.attributeFilter="Name like '%"+h.keyword+"%'"+a}if(h.classification&&h.classification!==""){b.sqlParam.attributeFilter+="and class like '%"+h.classification+"%'"}e.queryDatasetParams=[b];var d=new SuperMap.OSP.Service.QueryByKeywordsParam();d.dataSourceName=h.DataSourceName;d.queryParam=e;d.queryType=0;function c(l){var s=new SuperMap.OSP.Service.POISearchResult();if(l&&l.currentCount>0){var n=l.records;var r=[];for(var p=0;p<n.length;p++){var m=n[p];var q=new SuperMap.OSP.Service.POIInfo();for(var o=0;o<m.fields.length;o++){switch(m.fields[o]){case"SMX":q.x=parseFloat(m.fieldValues[o]);break;case"SMY":q.y=parseFloat(m.fieldValues[o]);break;case"POI_ID":q.code=m.fieldValues[o];break;case"NAME":q.name=m.fieldValues[o];break;case"PY":q.pinYin=m.fieldValues[o];break;case"ZIPCODE":q.zipCode=m.fieldValues[o];break;case"TELEPHONE":q.telephone=m.fieldValues[o];break;case"ADDRESS":q.address=m.fieldValues[o];break;case"ADMINCODE":q.adminCode=parseInt(m.fieldValues[o]);break;case"AFFILIATION":q.affiliation=m.fieldValues[o];break}}q.thirdPartyInfo=m.thirdPartyInfo;r.push(q)}s.currentCount=l.currentCount;s.totalCount=l.totalCount;s.records=r}g(s)}if(typeof(h.charsetEncoding)!="undefined"&&h.charsetEncoding!=null){d.charsetEncoding=h.charsetEncoding}this.search.queryByKeywords(d,c,f)},getPOIsByType:function(f,c,d){if(SuperMap.OSP.Core.Utility._isEmpty(f)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POISearch_getPOIsByType_param_getPOIsByTypeParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c)||typeof(c)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POISearch_getPOIsByType_param_onComplete_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(f.districtCode)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POISearch_getPOIsByType_param_getPOIsByTypeParam_districtCode_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(f.typeCode)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POISearch_getPOIsByType_param_getPOIsByType_typeCode_error"));return false}var h=new SuperMap.OSP.Service.QueryParam();h.expectCount=f.expectCount;h.startRecord=f.startRecord;h.returnResultSetInfo=SuperMap.REST.QueryOption.ATTRIBUTE;var g=new SuperMap.OSP.Service.QueryDatasetParam();g.name=f.datasetName;g.sqlParam=new SuperMap.OSP.Service.SqlParam();if(f.coordinate=="m"||f.coordinate=="M"){g.sqlParam.returnFields=["SMX","SMY","Name","PY","POI_ID","ZipCode","Address","Telephone"]}else{g.sqlParam.returnFields=["SMLLX","SMLLY","Name","PY","POI_ID","ZipCode","Address","Telephone"]}var b="";switch(f.districtLevel){case 1:b=" and FirstAdminCode='"+f.districtCode+"'";break;case 2:b=" and SecondAdminCode='"+f.districtCode+"'";break;case 3:b=" and ThirdAdminCode='"+f.districtCode+"'";break}var a="";switch(f.typeLevel){case 1:a=" FirstCode='"+f.typeCode+"'";break;case 2:a=" SecondCode='"+f.typeCode+"'";break;case 3:a=" ThirdCode='"+f.typeCode+"'";break}if(f.keyword!=""){g.sqlParam.attributeFilter="Name like '%"+f.keyword+"%' and "+a+b}else{g.sqlParam.attributeFilter=a+b}h.queryDatasetParams=[g];var i=new SuperMap.OSP.Service.QueryByKeywordsParam();i.dataSourceName=f.DataSourceName;i.queryParam=h;i.queryType=0;function e(l){var s=new SuperMap.OSP.Service.POISearchResult();if(l&&l.currentCount>0){var n=l.records;var r=[];for(var p=0;p<n.length;p++){var m=n[p];var q=new SuperMap.OSP.Service.POIInfo();for(var o=0;o<m.fields.length;o++){switch(m.fields[o]){case"SMX":q.x=parseFloat(m.fieldValues[o]);break;case"SMY":q.y=parseFloat(m.fieldValues[o]);break;case"POI_ID":q.code=m.fieldValues[o];break;case"NAME":q.name=m.fieldValues[o];break;case"PY":q.pinYin=m.fieldValues[o];break;case"ZIPCODE":q.zipCode=m.fieldValues[o];break;case"TELEPHONE":q.telephone=m.fieldValues[o];break;case"ADDRESS":q.address=m.fieldValues[o];break}}q.thirdPartyInfo=m.thirdPartyInfo;r.push(q)}s.currentCount=l.currentCount;s.totalCount=l.totalCount;s.records=r}c(s)}this.search.queryByKeywords(i,e,d)},getPOIsByGeometry:function(g,b,d){if(SuperMap.OSP.Core.Utility._isEmpty(g)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POISearch_getPOIsByGeometry_param_getPOIsByGeometryParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(b)||typeof(b)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POISearch_getPOIsByGeometry_param_onComplete_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(g.geometry)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POISearch_getPOIsByGeometry_param_getPOIsByGeometryParam_geometry_error"));return false}var i=new SuperMap.OSP.Service.QueryParam();i.returnResultSetInfo=SuperMap.REST.QueryOption.ATTRIBUTE;i.expectCount=g.expectCount;i.startRecord=g.startRecord;var h=new SuperMap.OSP.Service.QueryDatasetParam();h.name=g.datasetName;h.sqlParam=new SuperMap.OSP.Service.SqlParam();if(g.coordinate=="m"||g.coordinate=="M"){h.sqlParam.returnFields=["SMID","SMX","SMY","Name","PY","POI_ID","ZipCode","Address","Telephone","Admincode"]}else{h.sqlParam.returnFields=["SMID","SMLLX","SMLLY","Name","PY","POI_ID","ZipCode","Address","Telephone","Admincode"]}var f=(g.keyword&&g.keyword!=="");var c=(g.classification&&g.classification!="");if(f&&c){h.sqlParam.attributeFilter="Name like '%"+g.keyword+"%'";h.sqlParam.attributeFilter+=" and class like '%"+g.classification+"%'"}else{if(!f&&c){h.sqlParam.attributeFilter="class like '%"+g.classification+"%'"}else{if(f&&!c){h.sqlParam.attributeFilter="Name like '%"+g.keyword+"%'"}else{h.sqlParam.attributeFilter="class like '%all%'"}}}i.queryDatasetParams=[h];var a=new SuperMap.OSP.Service.QueryByGeometryParam();a.geometry=g.geometry;a.dataSourceName=g.DataSourceName;a.queryParam=i;function e(l){var s=new SuperMap.OSP.Service.POISearchResult();if(l&&l.currentCount>0){var n=l.records;var r=[];for(var p=0;p<n.length;p++){var m=n[p];var q=new SuperMap.OSP.Service.POIInfo();for(var o=0;o<m.fields.length;o++){switch(m.fields[o]){case"SMX":q.x=parseFloat(m.fieldValues[o]);break;case"SMY":q.y=parseFloat(m.fieldValues[o]);break;case"POI_ID":q.code=m.fieldValues[o];break;case"NAME":q.name=m.fieldValues[o];break;case"PY":q.pinYin=m.fieldValues[o];break;case"ZIPCODE":q.zipCode=m.fieldValues[o];break;case"TELEPHONE":q.telephone=m.fieldValues[o];break;case"ADDRESS":q.address=m.fieldValues[o];break;case"ADMINCODE":q.adminCode=parseInt(m.fieldValues[o]);break;case"AFFILIATION":q.affiliation=m.fieldValues[o];break}}q.thirdPartyInfo=m.thirdPartyInfo;r.push(q)}s.currentCount=l.currentCount;s.totalCount=l.totalCount;s.records=r}b(s)}this.search.queryByGeometry(a,e,d)},bufferSearch:function(g,f,e){if(SuperMap.OSP.Core.Utility._isEmpty(g)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POISearch_bufferSearch_param_bufferSearchParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(f)||typeof(f)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POISearch_bufferSearch_param_onComplete_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(g.geometry)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POISearch_bufferSearch_param_bufferSearchParam_geometry_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(g.keyword)){SuperMap.OSP.Core.Utility._alert("getPOIsByType方法的'bufferSearchParam.keyword'参数不能为空！");throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POISearch_bufferSearch_param_bufferSearchParam_keyword_error"));return false}var c=new SuperMap.OSP.Service.QueryParam();c.returnResultSetInfo=SuperMap.REST.QueryOption.ATTRIBUTE;c.expectCount=g.expectCount;c.startRecord=g.startRecord;var a=new SuperMap.OSP.Service.QueryDatasetParam();a.name=g.datasetName;a.sqlParam=new SuperMap.OSP.Service.SqlParam();if(g.coordinate=="m"||g.coordinate=="M"){a.sqlParam.returnFields=["SMID","SMX","SMY","Name","PY","POI_ID","ZipCode","Address","Telephone"]}else{a.sqlParam.returnFields=["SMID","SMLLX","SMLLY","Name","PY","POI_ID","ZipCode","Address","Telephone"]}a.sqlParam.attributeFilter="typeName = '"+g.typeName+"'";c.queryDatasetParams=[a];var d=new SuperMap.OSP.Service.QueryByGeometryParam();d.geometry=g.geometry;d.dataSourceName=g.DataSourceName;d.queryParam=c;function b(h){var r=new SuperMap.OSP.Service.POISearchResult();if(h&&h.currentCount>0){var m=h.records;var q=[];for(var o=0;o<m.length;o++){var l=m[o];var p=new SuperMap.OSP.Service.POIInfo();for(var n=0;n<l.fields.length;n++){switch(l.fields[n]){case"SMX":p.x=parseFloat(l.fieldValues[n]);break;case"SMY":p.y=parseFloat(l.fieldValues[n]);break;case"POI_ID":p.code=l.fieldValues[n];break;case"NAME":p.name=l.fieldValues[n];break;case"PY":p.pinYin=l.fieldValues[n];break;case"ZIPCODE":p.zipCode=l.fieldValues[n];break;case"TELEPHONE":p.telephone=l.fieldValues[n];break;case"ADDRESS":p.address=l.fieldValues[n];break}}p.thirdPartyInfo=l.thirdPartyInfo;q.push(p)}r.currentCount=h.currentCount;r.totalCount=h.totalCount;r.records=q}f(r)}this.search.queryByGeometry(g,b,e)},findAddress:function(f,g,e){if(SuperMap.OSP.Core.Utility._isEmpty(f.geometry)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POISearch_findAddress_param_findAddressParam_geometry_error"));return false}var c=new SuperMap.OSP.Service.QueryParam();c.returnResultSetInfo=SuperMap.REST.QueryOption.ATTRIBUTE;c.expectCount=f.expectCount;c.startRecord=f.startRecord;var a=new SuperMap.OSP.Service.QueryDatasetParam();a.name=f.datasetName;a.sqlParam=new SuperMap.OSP.Service.SqlParam();a.sqlParam.attributeFilter="";a.sqlParam.returnFields=["NAME","AFFILIATION"];c.queryDatasetParams=[a];var d=new SuperMap.OSP.Service.QueryByGeometryParam();d.geometry=f.geometry;d.dataSourceName=f.dataSourceName;d.queryParam=c;function b(h){var r=new SuperMap.OSP.Service.POISearchResult();if(h&&h.currentCount>0){var m=h.records;var q=[];for(var o=0;o<m.length;o++){var l=m[o];var p=new SuperMap.OSP.Service.POIInfo();for(var n=0;n<l.fields.length;n++){switch(l.fields[n]){case"NAME":p.name=l.fieldValues[n];break;case"AFFILIATION":p.affiliation=l.fieldValues[n];break}}p.thirdPartyInfo=l.thirdPartyInfo;q.push(p)}r.currentCount=h.currentCount;r.totalCount=h.totalCount;r.records=q}g(r)}this.search.latlonToAddress(f,b,e)},CLASS_NAME:"SuperMap.OSP.Service.POISearch"});SuperMap.OSP.Service.POITypeInfo=SuperMap.Class({initialize:function(){},id:0,name:null,code:null,parentCode:null,level:0,important:2,CLASS_NAME:"SuperMap.OSP.Service.POITypeInfo"});SuperMap.OSP.Service.POITypeSearch=SuperMap.Class({initialize:function(){},search:new SuperMap.OSP.Service.Search(),getTopTypes:function(f,e){if(SuperMap.OSP.Core.Utility._isEmpty(f)||typeof(f)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POITypeSearch_getTopTypes_param_onComplete_error"));return false}var d=new SuperMap.OSP.Service.QueryParam();d.expectCount=-1;d.startRecord=0;d.returnResultSetInfo=SuperMap.REST.QueryOption.ATTRIBUTE;var a=new SuperMap.OSP.Service.QueryDatasetParam();a.name="PoiType";a.sqlParam=new SuperMap.OSP.Service.SqlParam();a.sqlParam.returnFields=["SMID","Code","Name","ParentCode","UserLevel","Importance"];a.sqlParam.attributeFilter="UserLevel=1";d.queryDatasetParams=[a];var c=new SuperMap.OSP.Service.QueryByKeywordsParam();c.dataSourceName=SuperMap.OSP.Core._DataSourceName;c.queryParam=d;function b(g){var l=null;if(g&&g.currentCount>0){var m=g.records;var q=[];for(var o=0;o<m.length;o++){var h=m[o];var p=new SuperMap.OSP.Service.POITypeInfo();for(var n=0;n<h.fields.length;n++){switch(h.fields[n]){case"CODE":p.code=h.fieldValues[n];break;case"PARENTCODE":p.parentCode=h.fieldValues[n];break;case"USERLEVEL":p.level=h.fieldValues[n];break;case"NAME":p.name=h.fieldValues[n];break;case"SMID":p.id=h.fieldValues[n];break;case"IMPORANCE":p.important=h.fieldValue[n];break}}q.push(p)}l=q}f(l)}this.search.queryByKeywords(c,b,e)},getChildTypes:function(f,b,h,g){if(SuperMap.OSP.Core.Utility._isEmpty(f)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POITypeSearch_getChildTypes_param_typeCode_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(h)||typeof(h)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POITypeSearch_getChildTypes_param_onComplete_error"));return false}var e=new SuperMap.OSP.Service.QueryParam();e.expectCount=-1;e.startRecord=0;e.returnResultSetInfo=SuperMap.REST.QueryOption.ATTRIBUTE;var a=new SuperMap.OSP.Service.QueryDatasetParam();a.name="PoiType";a.sqlParam=new SuperMap.OSP.Service.SqlParam();a.sqlParam.returnFields=["SMID","Code","Name","ParentCode","UserLevel","Importance"];a.sqlParam.attributeFilter="ParentCode='"+f+"' and UserLevel='"+b+"'";e.queryDatasetParams=[a];var d=new SuperMap.OSP.Service.QueryByKeywordsParam();d.dataSourceName=SuperMap.OSP.Core._DataSourceName;d.queryParam=e;function c(l){var n=null;if(l&&l.currentCount>0){var o=l.records;var s=[];for(var q=0;q<o.length;q++){var m=o[q];var r=new SuperMap.OSP.Service.POITypeInfo();for(var p=0;p<m.fields.length;p++){switch(m.fields[p]){case"CODE":r.code=m.fieldValues[p];break;case"PARENTCODE":r.parentCode=m.fieldValues[p];break;case"USERLEVEL":r.level=m.fieldValues[p];break;case"NAME":r.name=m.fieldValues[p];break;case"SMID":r.id=m.fieldValues[p];break;case"IMPORANCE":r.important=m.fieldValue[p];break}}s.push(r)}n=s}h(n)}this.search.queryByKeywords(d,c,g)},getPOIType:function(e,g,f){if(SuperMap.OSP.Core.Utility._isEmpty(e)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POITypeSearch_getPOIType_param_typeCode_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(g)||typeof(g)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POITypeSearch_getPOIType_param_onComplete_error"));return false}var d=new SuperMap.OSP.Service.QueryParam();d.expectCount=-1;d.startRecord=0;d.returnResultSetInfo=SuperMap.REST.QueryOption.ATTRIBUTE;var a=new SuperMap.OSP.Service.QueryDatasetParam();a.name="PoiType";a.sqlParam=new SuperMap.OSP.Service.SqlParam();a.sqlParam.returnFields=["SMID","Code","Name","ParentCode","UserLevel","Importance"];a.sqlParam.attributeFilter="Code='"+e+"'";d.queryDatasetParams=[a];var c=new SuperMap.OSP.Service.QueryByKeywordsParam();c.dataSourceName=SuperMap.OSP.Core._DataSourceName;c.queryParam=d;function b(h){var m=null;if(h&&h.currentCount>0){var n=h.records;var q=new SuperMap.OSP.Service.POITypeInfo();for(var p=0;p<n.length;p++){var l=n[p];for(var o=0;o<l.fields.length;o++){switch(l.fields[o]){case"CODE":q.code=l.fieldValues[o];break;case"PARENTCODE":q.parentCode=l.fieldValues[o];break;case"USERLEVEL":q.level=l.fieldValues[o];break;case"NAME":q.name=l.fieldValues[o];break;case"SMID":q.id=l.fieldValues[o];break;case"IMPORANCE":q.important=l.fieldValue[o];break}}}m=q}g(m)}this.search.queryByKeywords(c,b,f)},CLASS_NAME:"SuperMap.OSP.Service.POITypeInfo"});SuperMap.OSP.Service.DistrictInfo=SuperMap.Class({initialize:function(){},id:0,name:null,code:null,parentCode:null,level:0,center:new SuperMap.Geometry.Point(0,0),CLASS_NAME:"SuperMap.OSP.Service.DistrictInfo"});SuperMap.OSP.Service.DistrictSearch=SuperMap.Class({initialize:function(){},search:new SuperMap.OSP.Service.Search(),getTopDistricts:function(f,e){if(SuperMap.OSP.Core.Utility._isEmpty(f)||typeof(f)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DistrictSearch_getTopDistricts_param_onComplete_error"));return false}var d=new SuperMap.OSP.Service.QueryParam();d.expectCount=-1;d.startRecord=0;d.returnResultSetInfo=SuperMap.REST.QueryOption.ATTRIBUTE;var a=new SuperMap.OSP.Service.QueryDatasetParam();a.name="BaseDistrict";a.sqlParam=new SuperMap.OSP.Service.SqlParam();a.sqlParam.returnFields=["SMID","AdminCode","AdminName","ParentAdminCode","UserLevel","X","Y"];a.sqlParam.attributeFilter="UserLevel=1";a.sqlParam.sortClause="id";d.queryDatasetParams=[a];var c=new SuperMap.OSP.Service.QueryByKeywordsParam();c.dataSourceName=SuperMap.OSP.Core._DataSourceName;c.queryParam=d;function b(g){var p=null;if(g&&g.currentCount>0){var l=g.records;var q=[];for(var n=0;n<l.length;n++){var h=l[n];var o=new SuperMap.OSP.Service.DistrictInfo();for(var m=0;m<h.fields.length;m++){switch(h.fields[m]){case"X":o.center.x=parseFloat(h.fieldValues[m]);break;case"Y":o.center.y=parseFloat(h.fieldValues[m]);break;case"ADMINCODE":o.code=h.fieldValues[m];break;case"PARENTADMINCODE":o.parentCode=h.fieldValues[m];break;case"USERLEVEL":o.level=h.fieldValues[m];break;case"ADMINNAME":o.name=h.fieldValues[m];break;case"SMID":o.id=h.fieldValues[m];break}}q.push(o)}p=q}f(p)}this.search.queryByKeywords(c,b,e)},getChildDistricts:function(d,g,f){if(SuperMap.OSP.Core.Utility._isEmpty(d)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DistrictSearch_getChildDistricts_param_districtCode_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(g)||typeof(g)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DistrictSearch_getChildDistricts_param_onComplete_error"));return false}var e=new SuperMap.OSP.Service.QueryParam();e.expectCount=-1;e.startRecord=0;e.returnResultSetInfo=SuperMap.REST.QueryOption.ATTRIBUTE;var a=new SuperMap.OSP.Service.QueryDatasetParam();a.name="BaseDistrict";a.sqlParam=new SuperMap.OSP.Service.SqlParam();a.sqlParam.returnFields=["SMID","AdminCode","AdminName","ParentAdminCode","UserLevel","X","Y"];a.sqlParam.attributeFilter="ParentAdminCode='"+d+"'";a.sqlParam.sortClause="id";e.queryDatasetParams=[a];var c=new SuperMap.OSP.Service.QueryByKeywordsParam();c.dataSourceName="quanguo";c.queryParam=e;function b(h){var q=null;if(h&&h.currentCount>0){var m=h.records;var r=[];for(var o=0;o<m.length;o++){var l=m[o];var p=new SuperMap.OSP.Service.DistrictInfo();for(var n=0;n<l.fields.length;n++){switch(l.fields[n]){case"X":p.center.x=parseFloat(l.fieldValues[n]);break;case"Y":p.center.y=parseFloat(l.fieldValues[n]);break;case"ADMINCODE":p.code=l.fieldValues[n];break;case"PARENTADMINCODE":p.parentCode=l.fieldValues[n];break;case"USERLEVEL":p.level=l.fieldValues[n];break;case"ADMINNAME":p.name=l.fieldValues[n];break;case"SMID":p.id=l.fieldValues[n];break}}r.push(p)}q=r}g(q)}this.search.queryByKeywords(c,b,f)},getDistrit:function(d,g,f){if(SuperMap.OSP.Core.Utility._isEmpty(d)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DistrictSearch_getDistrit_param_districtCode_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(g)||typeof(g)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","DistrictSearch_getDistrit_param_onComplete_error"));return false}var e=new SuperMap.OSP.Service.QueryParam();e.expectCount=-1;e.startRecord=0;e.returnResultSetInfo=SuperMap.REST.QueryOption.ATTRIBUTE;var a=new SuperMap.OSP.Service.QueryDatasetParam();a.name="BaseDistrict";a.sqlParam=new SuperMap.OSP.Service.SqlParam();a.sqlParam.returnFields=["SMID","AdminCode","AdminName","ParentAdminCode","UserLevel","X","Y"];a.sqlParam.attributeFilter="AdminCode='"+d+"'";a.sqlParam.sortClause="id";e.queryDatasetParams=[a];var c=new SuperMap.OSP.Service.QueryByKeywordsParam();c.dataSourceName=SuperMap.OSP.Core._DataSourceName;c.queryParam=e;function b(h){var q=null;if(h&&h.currentCount>0){var m=h.records;var p=new SuperMap.OSP.Service.DistrictInfo();for(var o=0;o<m.length;o++){var l=m[o];for(var n=0;n<l.fields.length;n++){switch(l.fields[n]){case"X":p.center.x=parseFloat(l.fieldValues[n]);break;case"Y":p.center.y=parseFloat(l.fieldValues[n]);break;case"ADMINCODE":p.code=l.fieldValues[n];break;case"PARENTADMINCODE":p.parentCode=l.fieldValues[n];break;case"USERLEVEL":p.level=l.fieldValues[n];break;case"ADMINNAME":p.name=l.fieldValues[n];break;case"SMID":p.id=l.fieldValues[n];break}}}q=p}g(q)}this.search.queryByKeywords(c,b,f)},CLASS_NAME:"SuperMap.OSP.Service.DistrictSearch"});SuperMap.OSP.Service.SpatialAnalyst=SuperMap.Class({initialize:function(){},url:null,bufferAnalyst:function(e,c,b,d){if(SuperMap.OSP.Core.Utility._isEmpty(e)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","SpatialAnalyst_bufferAnalyst_param_bufferAnalystParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c)||typeof(c)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","SpatialAnalyst_bufferAnalyst_param_onComplete_error"));return false}if(e.geometry){e.geometry=SuperMap.OSP.Core.Utility._geometryToServer2Geometry(e.geometry)}else{throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","SpatialAnalyst_bufferAnalyst_param_geometry_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(e.bufferParam)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","SpatialAnalyst_bufferAnalyst_param_bufferAnalystParam_bufferParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(e.geometry)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","SpatialAnalyst_bufferAnalyst_param_bufferAnalystParam_geometry_error"));return false}function a(f){if(f&&f.shape){var g=f.shape}c(f)}this._queryBase("bufferAnalyst",e,a,b,d)},isMultiPointInRegion:function(a,d,c,b,f){if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","SpatialAnalyst_isMultiPointInRegion_param_points_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(d)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","SpatialAnalyst_isMultiPointInRegion_param_region_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c)||typeof(c)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","SpatialAnalyst_isMultiPointInRegion_param_onComplete_error"));return false}var e={points:a,region:d};this._queryBase("isMultiPointInRegion",e,c,b,f)},_queryBase:function(b,g,e,d,h){if(SuperMap.OSP.Core.Utility._isEmpty(this.url)){throw new Error(SuperMap.Web.Resources.Resource.getMessage("SuperMap.OSP.Service.Resources","SpatialAnalyst_filed_url_error"));return false}var f=this.url+SuperMap.OSP.Core._ServiceSuffix;function a(i){if(i){if(i.error&&typeof(d)=="function"){d(i.error)}}e(i.result[0])}function c(i){if(typeof(d)=="function"){var j=new SuperMap.OSP.Service.ErrorResult;j.type=SuperMap.OSP.Core.ErrorType.ENVIRONMENT;j.information=i;d(j)}}SuperMap.OSP.Core.Utility.committer(f,"SpatialAnalyst",b,g,false,a,c,h)},CLASS_NAME:"SuperMap.OSP.Service.SpatialAnalyst"});SuperMap.OSP.Service.BufferAnalystResult=SuperMap.Class({initialize:function(){},area:null,shape:null,perimeter:null,CLASS_NAME:"SuperMap.OSP.Service.BufferAnalystResult"});SuperMap.OSP.Service.BufferAnalystParam=SuperMap.Class({initialize:function(){},dataSourceName:null,bufferParam:null,geometry:null,CLASS_NAME:"SuperMap.OSP.Service.BufferAnalystParam"});SuperMap.OSP.Service.PrintService=SuperMap.Class({initialize:function(){},printMap:function(){window.print()},CLASS_NAME:"SuperMap.OSP.Service.PrintService"});SuperMap.OSP.Service.MapCorrectInfo=SuperMap.Class({initialize:function(){},id:0,title:null,description:"",errorLink:"",correctLink:"",email:null,userId:null,createTime:null,reviewTime:0,refuseReason:null,status:"0",CLASS_NAME:"SuperMap.OSP.Service.MapCorrectInfo"});SuperMap.OSP.Service.MapCorrectService=SuperMap.Class({initialize:function(){},url:null,submitMapCorrect:function(a,c,b,d){if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByKeywords_param_queryByKeywordsParam_queryParam_returnResultSetInfo_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c)||typeof(c)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByKeywords_param_onComplete_error"));return false}this._queryBase("submitMapCorrection",a,c,b,d)},findMapCorrects:function(a,b,c,e,d,g){if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByKeywords_param_queryByKeywordsParam_queryParam_returnResultSetInfo_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(e)||typeof(e)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByKeywords_param_onComplete_error"));return false}var f={expectCount:a,startRecord:b,filter:c};this._queryBase("findMapCorrections",f,e,d,g)},refuseMapCorrect:function(b,d,c,a,f){if(SuperMap.OSP.Core.Utility._isEmpty(b)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByKeywords_param_queryByKeywordsParam_queryParam_returnResultSetInfo_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c)||typeof(c)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByKeywords_param_onComplete_error"));return false}var e={mapCorrectId:b,reason:d};this._queryBase("refuseMapCorrection",e,c,a,f)},approveMapCorrect:function(b,c,a,e){if(SuperMap.OSP.Core.Utility._isEmpty(b)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByKeywords_param_queryByKeywordsParam_queryParam_returnResultSetInfo_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c)||typeof(c)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByKeywords_param_onComplete_error"));return false}var d={mapCorrectId:b};this._queryBase("approveMapCorrection",d,c,a,e)},deleteMapCorrections:function(c,b,a,e){if(SuperMap.OSP.Core.Utility._isEmpty(c)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByKeywords_param_queryByKeywordsParam_queryParam_returnResultSetInfo_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(b)||typeof(b)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_queryByKeywords_param_onComplete_error"));return false}var d={mapCorrectIds:c};this._queryBase("deleteMapCorrections",d,b,a,e)},_queryBase:function(b,f,e,d,g){if(SuperMap.OSP.Core.Utility._isEmpty(this.url)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Search_filed_url_error"));return false}this.dataHandler=this.url+SuperMap.OSP.Core._ServiceSuffix;function a(h){if(h){if(h.error&&typeof(d)=="function"){d(h.error)}}e(h.result[0])}function c(h){if(typeof(d)=="function"){var i=new SuperMap.OSP.Service.ErrorResult;i.type=SuperMap.OSP.Core.ErrorType.ENVIRONMENT;i.information=h;d(i)}}SuperMap.OSP.Core.Utility.committer(this.dataHandler,"MapCorrectService",b,f,false,a,c,g)},CLASS_NAME:"SuperMap.OSP.Service.MapCorrectInfo"});SuperMap.OSP.Service.SePoint=SuperMap.Class({initialize:function(){},x:0,y:0,CLASS_NAME:"SuperMap.OSP.Service.SePoint"});SuperMap.OSP.Service.TransportionAnalystParameter=SuperMap.Class({initialize:function(){},startPoint:new SuperMap.OSP.Service.SePoint(),endPoint:new SuperMap.OSP.Service.SePoint(),nSearchMode:0,pPntWay:new Array(),CLASS_NAME:"SuperMap.OSP.Service.TransportionAnalystParameter"});SuperMap.OSP.Service.FindMultiPathLengtParameter=SuperMap.Class({initialize:function(){},paths:new Array(),CLASS_NAME:"SuperMap.OSP.Service.FindMultiPathLengtParameter"});SuperMap.OSP.Service.FindMultiPathLengtParameterPath=SuperMap.Class({initialize:function(){},id:1,startPointID:null,endPointID:null,CLASS_NAME:"SuperMap.OSP.Service.FindMultiPathLengtParameterPath"});SuperMap.OSP.Service.TransportationAnalyst=SuperMap.Class({initialize:function(){},url:SuperMap.OSP.Core._ServiceUrl,findPath:function(d,c,b,e){if(SuperMap.OSP.Core.Utility._isEmpty(d)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","TransportationAnalyst_findPath_param_findPathParameters_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c)||typeof(c)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","无回调函数"));return false}if(!d.startPoint){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","无起点信息"));return false}if(!d.endPoint){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","无终点信息"));return false}function a(g){if(g!==null&&g.path!==null){var o=g.path;var n=new Array();if(o){for(var m=0;m<o.parts.length;m++){var l=o.parts[m];for(var h=0;h<l.length;h++){var f=new SuperMap.Geometry.Point(l[h].x,l[h].y);n.push(f)}}}g.path=n;c(g)}else{b("路径分析失败")}}this._queryBase("findPath",d,a,b,e)},findMultiPathLength:function(c,b,a,d){if(SuperMap.OSP.Core.Utility._isEmpty(c)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","TransportationAnalyst_findPath_param_findPathParameters_error"));return false}this._queryBase("findMultiPathLength",c,b,a,d)},findPathByOffset:function(){if(SuperMap.OSP.Core.Utility._isEmpty(findPathParameters)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","TransportationAnalyst_findPath_param_findPathParameters_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(onComplete)||typeof(onComplete)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","无回调函数"));return false}if(!findPathParameters.startPoint){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","无起点信息"));return false}if(!findPathParameters.endPoint){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","无终点信息"));return false}findPathParameters.startPoint.x=parseFloat(findPathParameters.startPoint.x)+parseFloat(offSetPoint.x);findPathParameters.startPoint.y=parseFloat(findPathParameters.startPoint.y)+parseFloat(offSetPoint.y);findPathParameters.endPoint.x=parseFloat(findPathParameters.endPoint.x)+parseFloat(offSetPoint.x);findPathParameters.endPoint.y=parseFloat(findPathParameters.endPoint.y)+parseFloat(offSetPoint.y);function a(c){var h=c.path;var d=new SuperMap.Web.Core.GeoLine();d.parts=new Array();if(h){for(var g=0;g<h.parts.length;g++){var l=new Array();var f=h.parts[g];for(var e=0;e<f.length;e++){var b=new SuperMap.Web.Core.Point2D(f[e].x-parseFloat(offSetPoint.x),f[e].y-parseFloat(offSetPoint.y));l.push(b)}d.parts.push(l)}}c.path=d;onComplete(c)}this._queryBase("findPath",findPathParameters,a,onError,userContext)},_queryBase:function(b,g,e,d,h){if(SuperMap.OSP.Core.Utility._isEmpty(this.url)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","TransportationAnalyst_filed_url_error"));return false}var f=this.url+SuperMap.OSP.Core._ServiceSuffix;function a(i){if(i){if(i.error&&typeof(d)=="function"){d(i.error)}}e(i.result[0])}function c(i){if(typeof(d)=="function"){var j=new SuperMap.OSP.Service.ErrorResult;j.type=SuperMap.OSP.Core.ErrorType.ENVIRONMENT;j.information=i;d(j)}}SuperMap.OSP.Core.Utility.committer(f,"TransportationAnalyst",b,g,false,a,c,h)},CLASS_NAME:"SuperMap.OSP.Service.TransportationAnalyst"});SuperMap.OSP.Service.TrafficTransferAnalyst=SuperMap.Class({initialize:function(){},url:null,findTransferPath:function(a,c,b,d){if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","TrafficTransferAnalyst_findBusPath_param_BusParams_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c)||typeof(c)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","无回调函数"));return false}if(!a.startPoint){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","无起点信息"));return false}if(!a.endPoint){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","无终点信息"));return false}this._queryBase("findTransferPath",a,c,b,d)},_queryBase:function(b,g,e,d,h){if(SuperMap.OSP.Core.Utility._isEmpty(this.url)){throw new Error(SuperMap.Web.Resources.Resource.getMessage("SuperMap.OSP.Service.Resources","TransportationAnalyst_filed_url_error"));return false}var f=this.url+SuperMap.OSP.Core._ServiceSuffix;function a(i){if(i){if(i.error&&typeof(d)=="function"){d(i.error)}}e(i.result[0])}function c(i){if(typeof(d)=="function"){var j=new SuperMap.OSP.Service.ErrorResult;j.type=SuperMap.OSP.Core.ErrorType.ENVIRONMENT;j.information=i;d(j)}}SuperMap.OSP.Core.Utility.committer(f,"TrafficTransferAnalyst",b,g,false,a,c,h)},CLASS_NAME:"SuperMap.OSP.Service.TrafficTransferAnalyst"});SuperMap.OSP.Service.BusParams=SuperMap.Class({initialize:function(){},code:null,strategy:0,startPoint:new SuperMap.OSP.Service.SePoint(),endPoint:new SuperMap.OSP.Service.SePoint(),CLASS_NAME:"SuperMap.OSP.Service.BusParams"});SuperMap.OSP.Service.Utility.CoordinateService=SuperMap.Class({initialize:function(){},url:null,convertGPS2SM:function(d,c,b,e){if(SuperMap.OSP.Core.Utility._isEmpty(d)){SuperMap.OSP.Core.Utility._alert("getPois方法的'getPOIsParam'参数不能为空！");return false}function a(f){c(f)}this._queryBase("convertGPS2SM",d,a,b,e)},convertGPS2SMs:function(e,c,b,d){if(SuperMap.OSP.Core.Utility._isEmpty(e)){return false}function a(f){c(f)}this._queryBase("convertGPS2SMs",e,a,b,d)},_queryBase:function(b,f,e,d,g){if(SuperMap.OSP.Core.Utility._isEmpty(this.url)){return false}this.dataHandler=this.url+SuperMap.OSP.Core._ServiceSuffix;function a(h){if(h){if(h.error&&typeof(d)=="function"){d(h.error)}}e(h.result[0])}function c(h){if(typeof(d)=="function"){var i=new SuperMap.OSP.Service.ErrorResult;i.type=SuperMap.OSP.Core.ErrorType.ENVIRONMENT;i.information=h;d(i)}}SuperMap.OSP.Core.Utility.committer(this.dataHandler,"CoordinateService",b,f,false,a,c,g)},CLASS_NAME:"SuperMap.OSP.Service.Utility.CoordinateService"});SuperMap.OSP.Service.Utility.CoordinateParam=function(){this.coordinates=new Array();this.coordinateType="mm"};SuperMap.OSP.Utility.Resource=function(){};SuperMap.OSP.Utility.Resource.locale="zh_cn";SuperMap.OSP.Utility.Resource.getMessage=function(bundleName,key,message){var res=eval(bundleName+"."+SuperMap.OSP.Utility.Resource.locale+"."+key);res=res.replace("<message>",message);return res};SuperMap.OSP.Utility.Geometry=SuperMap.Class({initialize:function(){},point2Ds:new Array(),CLASS_NAME:"SuperMap.OSP.Utility.Geometry"});SuperMap.OSP.UI.Resources=SuperMap.Class({initialize:function(){},CLASS_NAME:"SuperMap.OSP.UI.Resources"});SuperMap.OSP.UI.Resources.zh_cn={POI_Constructor_parameterError:"参数id非法，传入值不能为空",POI_toEditHtml_tdTitle:"经纬度坐标",POI_toEditHtml_tdCoordX:"X",POI_toEditHtml_tdCoordY:"Y",POI_toEditHtml_inputSave:"保存",POI_toEditHtml_inputCancel:"取消",POIGroup_Constructor_parameterError:"参数id非法，传入值不能为空",POIGroup_addPOIs_parameterError:"参数pois非法，传入值不是合法的SuperMap.OSP.UI.POI类型或SuperMap.OSP.UI.POI类型的数组",POIGroup_editPOI_parameterError:"参数pois非法，传入值不是合法的SuperMap.OSP.UI.POI类型或SuperMap.OSP.UI.POI类型的数组",POIManager_Constructor_parameterError:"参数非法，传入值map不是合法的SuperMap.Web.Mapping.Map类型",POIManager_poiShow_poiEdit:"编辑属性",POIManager_poiShow_poiRemove:"删除点",POIManager_poiShow_poiMove:"移动",POIManager_poiEdit_varPanelTitle:"编辑点属性信息",POIManager_updateEditPoi_varSmxOrSmyIsNaN:"变量不合法，poi_smx或poi_smy为NaN类型",POIManager_addPOIGroup_parameterError:"参数非法，传入值poiGroup不是合法的SuperMap.OSP.UI.POIGroup类型或SuperMap.OSP.UI.POIGroup类型的数组",POIManager_editPOIGroup_parameterError:"参数非法，传入值poiGroup不是合法的SuperMap.OSP.UI.POIGroup类型或SuperMap.OSP.UI.POIGroup类型的数组",POIPanel_html_imgCloseAlt:"关闭",AutoComplete_show_tdCloseLink:"关闭",POIServer_findPoisByGroupId_serverGroupId:"参数serverGroupId非法,serverGroupId不是int类型",POIServer_savePois_serverGroupId:"参数serverGroupId非法,serverGroupId不是int类型",POIServer_savePois_pois:"参数pois非法,pois不是数组类型",POIServer_updatePois_pois:"参数pois非法,pois不是数组类型",POIServer_updatePois_serverGroupId:"参数serverGroupId非法,serverGroupId不是int类型",POIServer_deletePoi_poiId:"参数poiId非法,poiId不是int类型",POIServer_deletePois_poiIds:"参数poiIds非法,poiIds不是数组类型",POIServer_savePOIGroup_poiGroup:"参数poiGroup非法,poiGroup不是SuperMap.OSP.UI.POIGroup类型",POIServer_updatePOIGroup_poiGroup:"参数poiGroup非法,poiGroup不是SuperMap.OSP.UI.POIGroup类型",POIServer_deletePOIGroup_poiGroup:"参数serverGroupId非法,serverGroupId不是int类型",POIServer_filed_dataHandler_error:"POIServer服务类的url属性不能为空！"};SuperMap.OSP.UI.ScaledContent=SuperMap.Class({initialize:function(){},content:null,offset:SuperMap.OSP.Core.Point2D(0,0),CLASS_NAME:"SuperMap.OSP.UI.ScaledContent"});SuperMap.OSP.UI.POI=SuperMap.Class({initialize:function(a){if(typeof(a)=="string"){this.id=a}else{throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.UI.Resources","POI_Constructor_parameterError"))}this._events=[];this._eventNames=[]},position:new SuperMap.Geometry.Point(0,0),title:"",imageSize:new SuperMap.Size(0,0),scaledContents:"",properties:new Object(),visible:true,isPublic:true,serverId:0,serverGroupId:0,addEventListerner:function(c,a){if(c=="click"||c=="dblclick"||c=="mouseover"||c=="mouseout"||c=="mousedown"||c=="mouseup"||c=="mousemove"){var b=false;for(var d=0;d<this._eventNames.length;d++){if(this._eventNames[d]==c){b=true;break}}if(b){this._events.remove(a);this._events.push(a)}else{this._eventNames.push(c);this._events.push(a)}}},removeEventListerner:function(a){if(a=="click"||a=="dblClick"||a=="mouseOver"||a=="mouseOut"||a=="mouseDown"||a=="mouseUp"||a=="mouseMove"){var c=this._eventNames;this._eventNames=[];for(var b=0;b<c.length;b++){if(c[b]!=a){this._eventNames.push(c[b])}else{this._events=[]}}}},clone:function(){var a=new SuperMap.OSP.UI.POI(this.id+"clone");a.position=new SuperMap.Geometry.Point(this.position.x,this.position.y);a.title=this.title;a.properties=this.properties;a.visible=this.visible;a.isPublic=this.isPublic;a.serverId=this.serverId;if(this.scaledContents&&typeof(this.scaledContents.content)=="string"){a.scaledContents=new SuperMap.OSP.UI.ScaledContent();a.scaledContents.content=this.scaledContents.content;a.scaledContents.offset.x=this.scaledContents.offset.x;a.scaledContents.offset.y=this.scaledContents.offset.y}else{if(this.scaledContents&&this.scaledContents._size>0){a.scaledContents=new SuperMap.OSP.Core.HashMap();a.scaledContents._size=this.scaledContents._size;a.scaledContents._entry=this.scaledContents._entry}}return a},_toJson:function(){var a="{";var b=0;for(var c in this.properties){if(typeof(c)=="function"){continue}a+=c+':"'+this.properties[c]+'",';b++}if(b>0){a=a.substring(0,a.length-1)}else{a+="osp:''"}a+="}";return a},CLASS_NAME:"SuperMap.OSP.UI.POI"});SuperMap.OSP.UI.POIGroup=SuperMap.Class({initialize:function(a){if(typeof(a)=="string"){this.id=a;this.pois=[]}else{throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.UI.Resources","POIGroup_Constructor_parameterError"))}},level:1,visible:true,minScale:0,maxScale:1,scaledContents:null,caption:this.id,serverId:0,isPublic:true,userGroupId:0,getPOIs:function(c){var b=null;for(var a=0;a<this.pois.length;a++){if(c==this.pois[a].id){b=this.pois[a];break}}return b},addPOIs:function(e){if(typeof(e)=="object"&&typeof(e.length)!="undefined"){for(var c=0;c<e.length;c++){var d=false;for(var b=0,a=this.pois.length;b<a;b++){if(e[c].id==this.pois[b].id){d=true;break}}if(!d){this.pois.push(e[c])}}}else{if(typeof(e)=="object"&&typeof(e.id)=="string"){var d=false;for(var b=0,a=this.pois.length;b<a;b++){if(e.id==this.pois[b].id){d=true;break}}if(!d){this.pois.push(e)}}else{throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.UI.Resources","POIGroup_addPOIs_parameterError"))}}},removePOIs:function(d){if(typeof(d)=="object"&&typeof(d.length)!="undefined"){var e=this.pois;for(var c=0;c<d.length;c++){for(var b=0,a=e.length;b<a;b++){if(e[b]!=null&&d[c].id==e[b].id){e[b]=null;break}}}this.pois=[];for(var b=0,a=e.length;b<a;b++){if(e[b]!=null){this.pois.push(e[b])}}e=null}else{if(typeof(d)=="object"&&typeof(d.id)=="string"){var e=this.pois;this.pois=[];for(var b=0,a=e.length;b<a;b++){if(e[b]!=null&&e[b].id==d.id){e[b]=null}else{this.pois.push(e[b])}}e=null}else{if(typeof(d)=="string"){var e=this.pois;this.pois=[];for(var b=0,a=e.length;b<a;b++){if(e[b]!=null&&e[b].id==d){e[b]=null}else{this.pois.push(e[b])}}e=null}}}},editPOI:function(e){if(typeof(e)=="object"&&typeof(e.length)!="undefined"){for(var c=0;c<e.length;c++){var d=false;for(var b=0,a=this.pois.length;b<a;b++){if(e[c].id==this.pois[b].id){this.pois[b]=e[c];break}}}}else{if(typeof(e)=="object"&&typeof(e.id)=="string"){for(var b=0,a=this.pois.length;b<a;b++){if(this.pois[b]==e.id){this.pois[b]=e;break}}}else{throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.UI.Resources","POIGroup_editPOI_parameterError"))}}},clone:function(){var b=new SuperMap.OSP.UI.POIGroup(this.id+"_clone");b.level=this.level;b.visible=this.visible;b.maxScale=this.maxScale;b.minScale=this.minScale;if(this.scaledContents&&typeof(this.scaledContents.content)=="string"){b.scaledContents=new SuperMap.OSP.UI.ScaledContent();b.scaledContents.content=this.scaledContents.content;b.scaledContents.offset.x=this.scaledContents.offset.x;b.scaledContents.offset.y=this.scaledContents.offset.y}else{if(this.scaledContents&&this.scaledContents._size>0){b.scaledContents=new SuperMap.OSP.Core.HashMap();b.scaledContents._size=this.scaledContents._size;b.scaledContents._entry=this.scaledContents._entry}}b.caption=this.caption;b.serverId=this.serverId;b.isPublic=this.isPublic;b.userGroupId=this.userGroupId;if(this.pois){b.pois=[];for(var a=0;a<this.pois.length;a++){b.pois.push(this.pois[a].clone())}}return b},clearPOIs:function(){this.pois=[]},CLASS_NAME:"SuperMap.OSP.UI.POIGroup"});SuperMap.OSP.UI.POIManager=SuperMap.Class({initialize:function(a){if(a!=null){this.map=a}else{throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.UI.Resources","POIManager_Constructor_parameterError"))}},poiGroups:[],markerLayer:null,_oldPois:[],_initViewChanged:false,_pid:null,_gid:null,_offsetX:0,_offsetY:0,customerFun:function(){},refreshPOI:function(){var y=this;if(!y._initViewChanged){y.map.events.register("moveend ",{},function(){y.refreshPOI()});y._initViewChanged=true;y.refreshPOI()}else{var c=false;y.markerLayer.clearMarkers();y.customerFun();y._oldPois=[];for(var o=0;o<y.poiGroups.length;o++){var u=y.poiGroups[o];var t=u.id;var d=u.minScale;var a=u.maxScale;var n=u.level;var w=u.visible;var e=u.scaledContents;var f=u.poiOffset;if(w&&c>=d&&c<=a){for(var q=0,g=u.pois.length;q<g;q++){var p=u.pois[q];if(p.visible){var z=null;var h=null;if(p.scaledContents&&p.scaledContents.size){var b=p.scaledContents.get(c);z=b.content;h=b.offset}else{if(p.scaledContents&&p.scaledContents.content&&typeof(p.scaledContents.content)=="string"){var b=p.scaledContents;z=b.content;h=b.offset}else{if(e&&e.size){var b=e.get(c);z=b.content;h=b.offset}else{if(e&&e.content&&typeof(e.content)=="string"){var b=e;z=b.content;h=b.offset}}}}var s=p.id;if(p.imageSize.h==0&&p.imageSize.w==0){p.imageSize.h=25;p.imageSize.w=30;if(p.scaledContents.offset.x!=0||p.scaledContents.offset.y!=0){var l=new SuperMap.Pixel(p.scaledContents.offset.x,p.scaledContents.offset.y);var v=new SuperMap.Icon(z,p.imageSize,l)}else{var v=new SuperMap.Icon(z,p.imageSize)}}else{if(p.scaledContents.offset.x!=0||p.scaledContents.offset.y!=0){var l=new SuperMap.Pixel(p.scaledContents.offset.x,p.scaledContents.offset.y);var v=new SuperMap.Icon(z,p.imageSize,l)}else{var v=new SuperMap.Icon(z,p.imageSize)}}var x=new SuperMap.Marker(new SuperMap.LonLat(p.position.x,p.position.y),v);x.events.element.id=s;x.events.element.title=p.title;if(p.scaledContents.content.substr(0,1)=="<"){x.events.element.innerHTML=p.scaledContents.content}if(p._eventNames.length!=0&&p._events.length!=0){for(var r=0;r<p._events.length;r++){x.events.register(p._eventNames[r],p,p._events[r])}}y.markerLayer.addMarker(x);y._oldPois.push({id:s,markerLayer:y.markerLayer})}}}}}},getPOIGroup:function(c){var b=null;for(var a=0;a<this.poiGroups.length;a++){if(c==this.poiGroups[a].id){b=this.poiGroups[a];break}}return b},addPOIGroup:function(f){var e=false;if(typeof(f)=="object"&&typeof(f.length)!="undefined"){for(var c=0;c<f.length;c++){var d=false;for(var b=0,a=this.poiGroups.length;b<a;b++){if(f[c].id==this.poiGroups[b].id){d=true;break}}if(!d){this.poiGroups.push(f[c])}}e=true}else{if(typeof(f)=="object"&&typeof(f.id)=="string"){var d=false;for(var b=0,a=this.poiGroups.length;b<a;b++){if(f.id==this.poiGroups[b].id){d=true;break}}if(!d){this.poiGroups.push(f)}e=true}else{e=false;throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.UI.Resources","POIManager_addPOIGroup_parameterError"))}}if(e){}},removePOIGroup:function(f){var b=false;if(typeof(f)=="object"&&typeof(f.length)!="undefined"){var d=this.poiGroups;for(var e=0;e<f.length;e++){for(var c=0,a=d.length;c<a;c++){if(d[c]!=null&&f[e].id==d[c].id){d[c]=null;break}}}this.poiGroups=[];for(var c=0,a=d.length;c<a;c++){if(d[c]!=null){this.poiGroups.push(d[c])}}d=null;b=true}else{if(typeof(f)=="object"&&typeof(f.id)=="string"){var d=this.poiGroups;this.poiGroups=[];for(var c=0,a=d.length;c<a;c++){if(d[c]!=null&&d[c].id==f.id){d[c]=null}else{this.poiGroups.push(d[c])}}d=null;b=true}else{if(typeof(f)=="string"){var d=this.poiGroups;this.poiGroups=[];for(var c=0,a=d.length;c<a;c++){if(d[c]!=null&&d[c].id==f){d[c]=null}else{this.poiGroups.push(d[c])}}d=null;b=true}}}if(b){}},editPOIGroup:function(f){var e=false;if(typeof(f)=="object"&&typeof(f.length)!="undefined"){for(var c=0;c<f.length;c++){var d=false;for(var b=0,a=this.poiGroups.length;b<a;b++){if(f[c].id==this.poiGroups[b].id){this.poiGroups[b]=f[c];break}}}e=true}else{if(typeof(f)=="object"&&typeof(f.id)=="string"){for(var b=0,a=this.poiGroups.length;b<a;b++){if(this.poiGroups[b]==f.id){this.poiGroups[b]=f;break}}e=true}else{throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.UI.Resources","POIManager_editPOIGroup_parameterError"))}}if(e){}},CLASS_NAME:"SuperMap.OSP.UI.POIManager"});SuperMap.OSP.UI.POIService=SuperMap.Class({initialize:function(){},url:null,findPois:function(b,c,d,f,e,h){if(isNaN(b)){b=10}if(isNaN(c)){c=0}if(typeof(d)!="string"){d=""}function a(i){if(i&&i.currentCount>0){i.pois=SuperMap.OSP.UI.POIService._restorePois(i.pois)}f(i)}var g={expectCount:b,startRecord:c,filter:d};this._queryBase("findPois",g,a,e,h)},findPoisByGroupId:function(d,b,c,f,e,h){if(SuperMap.OSP.Core.Utility._isEmpty(d)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","POIServer_findPoisByGroupId_serverGroupId"));return false}if(isNaN(b)){b=10}if(isNaN(c)){c=0}function a(i){if(i){if(i&&i.currentCount>0){i.pois=SuperMap.OSP.UI.POIService._restorePois(i.pois)}}f(i)}var g={expectCount:b,startRecord:c,serverGroupId:d};this._queryBase("findPoisByGroupId",g,a,e,h)},findPOIGroups:function(b,d,c,f){if(typeof(b)!="string"){b=""}function a(g){if(g&&g.length>0){var h=[];for(var j=0;j<g.length;j++){var l=SuperMap.OSP.UI.POIService._restorePoiGroup(g[j]);h.push(l)}g=h}d(g)}var e={filter:b};this._queryBase("findPOIGroups",e,a,c,f)},savePois:function(b,d,e,c,g){if(SuperMap.OSP.Core.Utility._isEmpty(b)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.UI.Resources","POIServer_savePois_serverGroupId"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(d)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.UI.Resources","POIServer_savePois_pois"));return false}d=this._filterPois(d);function a(h){if(h){var i=SuperMap.OSP.UI.POIService._restorePois(h);e(i)}}var f={serverGroupId:b,pois:d};this._queryBase("savePois",f,a,c,g)},updatePois:function(a,c,d,b,f){if(SuperMap.OSP.Core.Utility._isEmpty(c)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.UI.Resources","POIServer_updatePois_pois"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.UI.Resources","POIServer_updatePois_serverGroupId"));return false}c=this._filterPois(c);var e={serverGroupId:a,pois:c};this._queryBase("updatePois",e,d,b,f)},deletePoi:function(c,b,a,e){if(SuperMap.OSP.Core.Utility._isEmpty(c)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.UI.Resources","POIServer_deletePoi_poiId"));return false}var d={poiId:c};this._queryBase("deletePoi",d,b,a,e)},deletePois:function(a,c,b,e){if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.UI.Resources","POIServer_deletePois_poiIds"));return false}var d={poiIds:a};this._queryBase("deletePois",d,c,b,e)},savePOIGroup:function(c,d,b,e){if(SuperMap.OSP.Core.Utility._isEmpty(c)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.UI.Resources","POIServer_savePOIGroup_poiGroup"));return false}c=this._filterPOIGroup(c);function a(f){if(f){f=SuperMap.OSP.UI.POIService._restorePoiGroup(f)}d(f)}this._queryBase("savePOIGroup",c,a,b,e)},updatePOIGroup:function(b,c,a,d){if(SuperMap.OSP.Core.Utility._isEmpty(b)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.UI.Resources","POIServer_updatePOIGroup_poiGroup"));return false}b=this._filterPOIGroup(b);this._queryBase("updatePOIGroup",b,c,a,d)},deletePOIGroup:function(a,c,b,e){if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.UI.Resources","POIServer_deletePOIGroup_poiGroup"));return false}var d={serverGroupId:a};this._queryBase("deletePOIGroup",d,c,b,e)},_queryBase:function(b,f,e,d,g){if(SuperMap.OSP.Core.Utility._isEmpty(this.url)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.UI.Resources","POIServer_filed_dataHandler_error"));return false}this.dataHandler=this.url+SuperMap.OSP.Core._ServiceSuffix;function a(h){if(h){if(h.error&&typeof(d)=="function"){d(h.error)}}e(h.result[0])}function c(h){if(typeof(d)=="function"){var i=new SuperMap.OSP.Service.ErrorResult;i.type=SuperMap.OSP.Core.ErrorType.ENVIRONMENT;i.information=h;d(i)}}SuperMap.OSP.Core.Utility.committer(this.dataHandler,"POIService",b,f,false,a,c,g)},_filterPois:function(b){if(b&&b.length>0){for(var a=0;a<b.length;a++){b[a]._events=null;b[a]._eventNames=null}}return b},_filterPOIGroup:function(a){if(a&&a.pois){a.pois=null}return a},CLASS_NAME:"SuperMap.OSP.UI.POIService"});SuperMap.OSP.UI.POIService._restorePois=function(poisStr){var pois=[];if(poisStr){var backPois=poisStr;if(backPois&&backPois.length>0){for(var i=0;i<backPois.length;i++){var poi=backPois[i];var newpoi=new SuperMap.OSP.UI.POI("osp_temp_poiId_"+i+"_"+poi.serverId);if(poi.id){newpoi.id=poi.id}newpoi.title=poi.title;newpoi.isPublic=poi.isPublic;newpoi.serverId=poi.serverId;newpoi.visible=poi.visible;newpoi.serverGroupId=poi.serverGroupId;if(poi.position&&poi.position.x){newpoi.position=new SuperMap.Geometry.Point(poi.position.x,poi.position.y)}if(backPois[i]&&backPois[i].scaledContents){var scaledContents=eval("("+poi.scaledContents+")");backPois[i].scaledContents=scaledContents;if(scaledContents&&scaledContents.content){newpoi.scaledContents=new SuperMap.OSP.UI.ScaledContent();var point=new SuperMap.Geometry.Point(0,0);if(scaledContents.offset&&scaledContents.offset.x){point.x=scaledContents.offset.x;point.y=scaledContents.offset.y}newpoi.scaledContents.content=scaledContents.content;newpoi.scaledContents.offset=point}if(scaledContents&&scaledContents._size){newpoi.scaledContents=new SuperMap.OSP.Core.HashMap();newpoi.scaledContents._entry=scaledContents._entry}}if(backPois[i]&&backPois[i].properties){newpoi.properties=eval("("+poi.properties+")")}pois.push(newpoi)}}return pois}};SuperMap.OSP.UI.POIService._restorePoiGroup=function(poiGroup){var newPOIGroup=new SuperMap.OSP.UI.POIGroup("osp_temp_poiGrouoId_"+poiGroup.serverId);if(poiGroup.id){newPOIGroup.id=poiGroup.id}newPOIGroup.level=poiGroup.level;newPOIGroup.visible=poiGroup.visible;newPOIGroup.maxScale=poiGroup.maxScale;newPOIGroup.minScale=poiGroup.minScale;newPOIGroup.caption=poiGroup.caption;newPOIGroup.serverId=poiGroup.serverId;newPOIGroup.isPublic=poiGroup.isPublic;newPOIGroup.userGroupId=poiGroup.userGroupId;if(poiGroup.scaledContents){var scaledContents=eval("("+poiGroup.scaledContents+")");if(scaledContents&&scaledContents.content){newPOIGroup.scaledContents=new SuperMap.OSP.UI.ScaledContent();var point=new SuperMap.Geometry.Point(0,0);if(scaledContents.offset&&scaledContents.offset.x){point.x=scaledContents.offset.x;point.y=scaledContents.offset.y}newPOIGroup.scaledContents.content=scaledContents.content;newPOIGroup.scaledContents.offset=point}if(scaledContents&&scaledContents._size){newPOIGroup.scaledContents=new SuperMap.OSP.Core.HashMap();newPOIGroup.scaledContents._entry=scaledContents._entry}}return newPOIGroup};function OspPager(b,a){this.name=b;this.page=1;this.pageCount=1;this.argName="page";this.showTimes=1;this.doChangePageFun=a}OspPager.prototype.checkPages=function(){if(isNaN(parseInt(this.page))){this.page=1}if(isNaN(parseInt(this.pageCount))){this.pageCount=1}if(this.page<1){this.page=1}if(this.pageCount<1){this.pageCount=1}if(this.page>this.pageCount){this.page=this.pageCount}this.page=parseInt(this.page);this.pageCount=parseInt(this.pageCount)};OspPager.prototype.createHtml=function(e){var f="",c=this.page-1,b=this.page+1;f+='<div class="'+e+'">';if(c<1){f+='<span title="Prev Page" class="disabled">&#8249;</span>'}else{f+='<span title="Prev Page"><a href="javascript:'+this.name+".toPage("+c+');">&#8249;</a></span>'}if(this.page!=1){f+='<span title="Page 1"><a href="javascript:'+this.name+'.toPage(1);">1</a></span>'}if(this.page>=5){f+="<span>...</span>"}if(this.pageCount>this.page+2){var a=this.page+2}else{var a=this.pageCount}for(var d=this.page-1;d<=a;d++){if(d>0){if(d==this.page){f+='<span title="Page '+d+'" class="current">'+d+"</span>"}else{if(d!=1&&d!=this.pageCount){f+='<span title="Page '+d+'"><a href="javascript:'+this.name+".toPage("+d+');">'+d+"</a></span>"}}}}if(this.page+3<this.pageCount){f+="<span>...</span>"}if(this.page!=this.pageCount){f+='<span title="Page '+this.pageCount+'"><a href="javascript:'+this.name+".toPage("+this.pageCount+');">'+this.pageCount+"</a></span>"}if(b>this.pageCount){f+='<span title="Next Page" class="disabled">&#8250;</span>'}else{f+='<span title="Next Page"><a href="javascript:'+this.name+".toPage("+b+');">&#8250;</a></span>'}f+="</div><br />";return f};OspPager.prototype.toPage=function(b){var a=1;if(typeof(b)=="object"){a=b.options[b.selectedIndex].value}else{a=b}if(isNaN(parseInt(b))){b=1}if(b<1){b=1}if(b>this.pageCount){b=this.pageCount}this.page=b;this.doChangePageFun(b);this.printHtml(this.mode,this.pageDiv)};OspPager.prototype.printHtml=function(b,a){this.mode=b;this.pageDiv=a;this.checkPages();this.showTimes+=1;document.getElementById(this.pageDiv).setAttribute("class","pages");document.getElementById(this.pageDiv).innerHTML=this.createHtml(b)};OspPager.prototype.reset=function(){this.page=1;this.pageCount=1;this.argName="page";this.showTimes=1};function Node(c,f,a,b,i,g,h,d,e){this.id=c;this.pid=f;this.name=a;this.url=b;this.title=i;this.target=g;this.icon=h;this.iconOpen=d;this._io=e||false;this._is=false;this._ls=false;this._hc=false;this._ai=0;this._p}function OspTree(a){this.config={target:null,folderLinks:true,useSelection:true,useCookies:true,useLines:true,useIcons:true,useStatusText:false,closeSameLevel:false,inOrder:false};this.icon={root:"images/base.gif",folder:"images/folder.gif",folderOpen:"images/folderopen.gif",node:"images/page.gif",empty:"images/empty.gif",line:"images/line.gif",join:"images/join.gif",joinBottom:"images/joinbottom.gif",plus:"images/plus.gif",plusBottom:"images/plusbottom.gif",minus:"images/minus.gif",minusBottom:"images/minusbottom.gif",nlPlus:"images/nolines_plus.gif",nlMinus:"images/nolines_minus.gif"};this.obj=a;this.aNodes=[];this.aIndent=[];this.root=new Node(-1);this.selectedNode=null;this.selectedFound=false;this.completed=false}OspTree.prototype.add=function(c,f,a,b,i,g,h,d,e){this.aNodes[this.aNodes.length]=new Node(c,f,a,b,i,g,h,d,e)};OspTree.prototype.openAll=function(){this.oAll(true)};OspTree.prototype.closeAll=function(){this.oAll(false)};OspTree.prototype.toString=function(){var a='<div class="dtree">\n';if(document.getElementById){if(this.config.useCookies){this.selectedNode=this.getSelected()}a+=this.addNode(this.root)}else{a+="Browser not supported."}a+="</div>";if(!this.selectedFound){this.selectedNode=null}this.completed=true;return a};OspTree.prototype.addNode=function(a){var b="";var d=0;if(this.config.inOrder){d=a._ai}for(d;d<this.aNodes.length;d++){if(this.aNodes[d].pid==a.id){var c=this.aNodes[d];c._p=a;c._ai=d;this.setCS(c);if(!c.target&&this.config.target){c.target=this.config.target}if(c._hc&&!c._io&&this.config.useCookies){c._io=this.isOpen(c.id)}if(!this.config.folderLinks&&c._hc){c.url=null}if(this.config.useSelection&&c.id==this.selectedNode&&!this.selectedFound){c._is=true;this.selectedNode=d;this.selectedFound=true}b+=this.node(c,d);if(c._ls){break}}}return b};OspTree.prototype.node=function(a,c){var b='<div class="OspTreeNode">'+this.indent(a,c);if(this.config.useIcons){if(!a.icon){a.icon=(this.root.id==a.pid)?this.icon.root:((a._hc)?this.icon.folder:this.icon.node)}if(!a.iconOpen){a.iconOpen=(a._hc)?this.icon.folderOpen:this.icon.node}if(this.root.id==a.pid){a.icon=this.icon.root;a.iconOpen=this.icon.root}b+='<img id="i'+this.obj+c+'" src="'+((a._io)?a.iconOpen:a.icon)+'" alt="" />'}if(a.url){b+='<a id="s'+this.obj+c+'" class="'+((this.config.useSelection)?((a._is?"nodeSel":"node")):"node")+'" href="'+a.url+'"';if(a.title){b+=' title="'+a.title+'"'}if(a.target){b+=' target="'+a.target+'"'}if(this.config.useStatusText){b+=" onmouseover=\"window.status='"+a.name+"';return true;\" onmouseout=\"window.status='';return true;\" "}if(this.config.useSelection&&((a._hc&&this.config.folderLinks)||!a._hc)){b+=' onclick="javascript: '+this.obj+".s("+c+');"'}b+=">"}else{if((!this.config.folderLinks||!a.url)&&a._hc&&a.pid!=this.root.id){b+='<a href="javascript: '+this.obj+".o("+c+');" class="node">'}}b+=a.name;if(a.url||((!this.config.folderLinks||!a.url)&&a._hc)){b+="</a>"}b+="</div>";if(a._hc){b+='<div id="d'+this.obj+c+'" class="clip" style="display:'+((this.root.id==a.pid||a._io)?"block":"none")+';">';b+=this.addNode(a);b+="</div>"}this.aIndent.pop();return b};OspTree.prototype.indent=function(a,c){var b="";if(this.root.id!=a.pid){for(var d=0;d<this.aIndent.length;d++){b+='<img src="'+((this.aIndent[d]==1&&this.config.useLines)?this.icon.line:this.icon.empty)+'" alt="" />'}(a._ls)?this.aIndent.push(0):this.aIndent.push(1);if(a._hc){b+='<a href="javascript: '+this.obj+".o("+c+');"><img id="j'+this.obj+c+'" src="';if(!this.config.useLines){b+=(a._io)?this.icon.nlMinus:this.icon.nlPlus}else{b+=((a._io)?((a._ls&&this.config.useLines)?this.icon.minusBottom:this.icon.minus):((a._ls&&this.config.useLines)?this.icon.plusBottom:this.icon.plus))}b+='" alt="" /></a>'}else{b+='<img src="'+((this.config.useLines)?((a._ls)?this.icon.joinBottom:this.icon.join):this.icon.empty)+'" alt="" />'}}return b};OspTree.prototype.setCS=function(a){var b;for(var c=0;c<this.aNodes.length;c++){if(this.aNodes[c].pid==a.id){a._hc=true}if(this.aNodes[c].pid==a.pid){b=this.aNodes[c].id}}if(b==a.id){a._ls=true}};OspTree.prototype.getSelected=function(){var a=this.getCookie("cs"+this.obj);return(a)?a:null};OspTree.prototype.s=function(b){if(!this.config.useSelection){return}var a=this.aNodes[b];if(a._hc&&!this.config.folderLinks){return}if(this.selectedNode!=b){if(this.selectedNode||this.selectedNode==0){eOld=document.getElementById("s"+this.obj+this.selectedNode);eOld.className="node"}eNew=document.getElementById("s"+this.obj+b);eNew.className="nodeSel";this.selectedNode=b;if(this.config.useCookies){this.setCookie("cs"+this.obj,a.id)}}};OspTree.prototype.o=function(b){var a=this.aNodes[b];this.nodeStatus(!a._io,b,a._ls);a._io=!a._io;if(this.config.closeSameLevel){this.closeLevel(a)}if(this.config.useCookies){this.updateCookie()}};OspTree.prototype.oAll=function(a){for(var b=0;b<this.aNodes.length;b++){if(this.aNodes[b]._hc&&this.aNodes[b].pid!=this.root.id){this.nodeStatus(a,b,this.aNodes[b]._ls);this.aNodes[b]._io=a}}if(this.config.useCookies){this.updateCookie()}};OspTree.prototype.openTo=function(b,a,c){if(!c){for(var e=0;e<this.aNodes.length;e++){if(this.aNodes[e].id==b){b=e;break}}}var d=this.aNodes[b];if(d.pid==this.root.id||!d._p){return}d._io=true;d._is=a;if(this.completed&&d._hc){this.nodeStatus(true,d._ai,d._ls)}if(this.completed&&a){this.s(d._ai)}else{if(a){this._sn=d._ai}}this.openTo(d._p._ai,false,true)};OspTree.prototype.closeLevel=function(a){for(var b=0;b<this.aNodes.length;b++){if(this.aNodes[b].pid==a.pid&&this.aNodes[b].id!=a.id&&this.aNodes[b]._hc){this.nodeStatus(false,b,this.aNodes[b]._ls);this.aNodes[b]._io=false;this.closeAllChildren(this.aNodes[b])}}};OspTree.prototype.closeAllChildren=function(a){for(var b=0;b<this.aNodes.length;b++){if(this.aNodes[b].pid==a.id&&this.aNodes[b]._hc){if(this.aNodes[b]._io){this.nodeStatus(false,b,this.aNodes[b]._ls)}this.aNodes[b]._io=false;this.closeAllChildren(this.aNodes[b])}}};OspTree.prototype.nodeStatus=function(a,c,b){eDiv=document.getElementById("d"+this.obj+c);eJoin=document.getElementById("j"+this.obj+c);if(this.config.useIcons){eIcon=document.getElementById("i"+this.obj+c);eIcon.src=(a)?this.aNodes[c].iconOpen:this.aNodes[c].icon}eJoin.src=(this.config.useLines)?((a)?((b)?this.icon.minusBottom:this.icon.minus):((b)?this.icon.plusBottom:this.icon.plus)):((a)?this.icon.nlMinus:this.icon.nlPlus);eDiv.style.display=(a)?"block":"none"};OspTree.prototype.clearCookie=function(){var a=new Date();var b=new Date(a.getTime()-1000*60*60*24);this.setCookie("co"+this.obj,"cookieValue",b);this.setCookie("cs"+this.obj,"cookieValue",b)};OspTree.prototype.setCookie=function(f,e,a,d,b,c){document.cookie=escape(f)+"="+escape(e)+(a?"; expires="+a.toGMTString():"")+(d?"; path="+d:"")+(b?"; domain="+b:"")+(c?"; secure":"")};OspTree.prototype.getCookie=function(e){var d="";var b=document.cookie.indexOf(escape(e)+"=");if(b!=-1){var c=b+(escape(e)+"=").length;var a=document.cookie.indexOf(";",c);if(a!=-1){d=unescape(document.cookie.substring(c,a))}else{d=unescape(document.cookie.substring(c))}}return(d)};OspTree.prototype.updateCookie=function(){var a="";for(var b=0;b<this.aNodes.length;b++){if(this.aNodes[b]._io&&this.aNodes[b].pid!=this.root.id){if(a){a+="."}a+=this.aNodes[b].id}}this.setCookie("co"+this.obj,a)};OspTree.prototype.isOpen=function(c){var b=this.getCookie("co"+this.obj).split(".");for(var a=0;a<b.length;a++){if(b[a]==c){return true}}return false};if(!Array.prototype.push){Array.prototype.push=function array_push(){for(var a=0;a<arguments.length;a++){this[this.length]=arguments[a]}return this.length}}if(!Array.prototype.pop){Array.prototype.pop=function array_pop(){lastElement=this[this.length-1];this.length=Math.max(this.length-1,0);return lastElement}}SuperMap.OSP.ExtentionService.Resources=SuperMap.Class({initialize:function(){},CLASS_NAME:"SuperMap.OSP.ExtentionService.Resources"});SuperMap.OSP.ExtentionService.Resources.zh_cn={ShareMap_saveClientStateInfo_param_clientStateInfo:"shareMap的saveClientStateInfo方法的clientStateInfo参数不能为空！",ShareMap_saveClientStateInfo_param_onComplete:"shareMap的saveClientStateInfo方法的onComplete参数类型为function！",ShareMap_getClientStateInfo_param_onComplete:"shareMap的getClientStateInfo方法的onComplete参数类型为function！",ShareMap_getClientStateInfo_param_linkUrl:"shareMap的getClientStateInfo方法的'linkUrl'参数应该为地址URL参数！",ShareMap_field_dataHandler:"ShareMap的属性dataHandler不能为空",StatisticService_getCategory_param_onComplete:"StatisticService的getCategory方法的'onComplete'参数类型为function！",StatisticService_getIndex_param_categoryNames:"StatisticService的getIndex方法的'categoryNames'参数不能为空！",StatisticService_getIndex_param_onComplete:"StatisticService的 getIndex 方法的'onComplete'参数类型为function！",StatisticService_calculate_param_onComplete:"StatisticService的 calculate 方法的'onComplete'参数类型为function！",StatisticService_calculate_param_statisticParam:"StatisticService的 calculate 方法的'statisticParam'参数不能为空",StatisticService_field_dataHandler:"StatisticService的属性dataHandler不能为空",Monitor_realTimeMonitor_param_monitorParam:"Monitor的 realTimeMonitor 方法的'monitorParam'参数不能为空",Monitor_realTimeMonitor_param_onComplete:"Monitor的 realTimeMonitor 方法的'onComplete'参数类型为function！",Monitor_onceMonitor_param_monitorParam:"Monitor的 onceMonitor 方法的'monitorParam'参数不能为空",Monitor_onceMonitor_param_onComplete:"Monitor的 onceMonitor 方法的'onComplete'参数类型为function！",Monitor_field_dataHandler:"Monitor的属性dataHandler不能为空"};SuperMap.OSP.ExtentionService.ShareMap=SuperMap.Class({initialize:function(){},url:null,saveClientStateInfo:function(a,b,f,e,h){if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.ExtentionService.Resources","ShareMap_saveClientStateInfo_param_clientStateInfo"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(b)){b=24}if(SuperMap.OSP.Core.Utility._isEmpty(f)||typeof(f)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.ExtentionService.Resources","ShareMap_saveClientStateInfo_param_onComplete"));return false}if(a.features&&a.features.length>0){for(var d=0;d<a.features.length;d++){var c=a.features[d];c.geometry=SuperMap.OSP.Core.Utility._geometryToServer2Geometry(c.geometry)}}var g={clientStateInfo:a,saveTime:b};this._queryBase("saveClientStateInfo",g,f,e,h)},getClientStateInfo:function(keyId,onComplete,onError,userContext){if(SuperMap.OSP.Core.Utility._isEmpty(keyId)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.ExtentionService.Resources","ShareMap_getClientStateInfo_param_linkUrl"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(onComplete)||typeof(onComplete)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.ExtentionService.Resources","ShareMap_getClientStateInfo_param_onComplete"));return false}function onCompleteFun(result){if(result){var clientInfo=eval("("+result+")");if(clientInfo){if(clientInfo.viewBounds){clientInfo.viewBounds=new SuperMap.Bounds(clientInfo.viewBounds.left,clientInfo.viewBounds.bottom,clientInfo.viewBounds.right,clientInfo.viewBounds.top)}var poiGroups=[];if(clientInfo.poiGroups&&clientInfo.poiGroups.length>0){for(var i=0,l=clientInfo.poiGroups.length;i<l;i++){var oldPoiGroup=clientInfo.poiGroups[i];var poiGroup=new SuperMap.OSP.UI.POIGroup(oldPoiGroup.id);poiGroup.caption=oldPoiGroup.caption;poiGroup.level=oldPoiGroup.level;poiGroup.maxScale=oldPoiGroup.maxScale;poiGroup.minScale=oldPoiGroup.minScale;poiGroup.visible=oldPoiGroup.visible;poiGroup.isPublic=oldPoiGroup.isPublic;poiGroup.serverId=oldPoiGroup.serverId;poiGroup.userGroupId=oldPoiGroup.userGroupId;if(oldPoiGroup.scaledContents){if(typeof(oldPoiGroup.scaledContents.content)=="string"){poiGroup.scaledContents=new SuperMap.OSP.UI.ScaledContent();poiGroup.scaledContents.content=oldPoiGroup.scaledContents.content;poiGroup.scaledContents.offset.x=oldPoiGroup.scaledContents.offset.x;poiGroup.scaledContents.offset.y=oldPoiGroup.scaledContents.offset.y}else{if(oldPoi.scaledContents&&typeof(oldPoi.scaledContents._size)=="number"){poiGroup.scaledContents=new SuperMap.OSP.Core.HashMap();poiGroup.scaledContents._size=oldPoiGroup.scaledContents._size;poiGroup.scaledContents._entry=oldPoiGroup.scaledContents._entry}}}if(oldPoiGroup.pois&&oldPoiGroup.pois.length>0){for(var j=0,jl=oldPoiGroup.pois.length;j<jl;j++){var oldPoi=oldPoiGroup.pois[j];var newPoi=new SuperMap.OSP.UI.POI(oldPoi.id);newPoi.position=oldPoi.position;newPoi.title=oldPoi.title;newPoi.properties=oldPoi.properties;newPoi.visible=oldPoi.visible;if(oldPoi.scaledContents){if(typeof(oldPoi.scaledContents.content)=="string"){newPoi.scaledContents=new SuperMap.OSP.UI.ScaledContent();newPoi.scaledContents.content=oldPoi.scaledContents.content;newPoi.scaledContents.offset.x=oldPoi.scaledContents.offset.x;newPoi.scaledContents.offset.y=oldPoi.scaledContents.offset.y}else{if(oldPoi.scaledContents&&typeof(oldPoi.scaledContents._size)=="number"){newPoi.scaledContents=new SuperMap.OSP.Core.HashMap();newPoi.scaledContents._size=oldPoi.scaledContents._size;newPoi.scaledContents._entry=oldPoi.scaledContents._entry}}}poiGroup.addPOIs(newPoi)}}poiGroups.push(poiGroup)}clientInfo.poiGroups=poiGroups;var features=[];if(clientInfo.features&&clientInfo.features.length>0){for(var i=0;i<clientInfo.features.length;i++){var oldFeature=clientInfo.features[i];var newFeature=new SuperMap.Web.Core.Feature();newFeature.attributes=oldFeature.attributes;newFeature.caption=oldFeature.caption;newFeature.geometry=SuperMap.OSP.Core.Utility._server2GeometryToClientGeometry(oldFeature.geometry);newFeature.id=oldFeature.id;newFeature.style=oldFeature.style;newFeature.title=oldFeature.title;features.push(newFeature)}}clientInfo.features=features}onComplete(clientInfo)}else{onComplete(null)}}else{onComplete(result)}}var params={keyId:keyId};this._queryBase("getClientStateInfo",params,onCompleteFun,onError,userContext)},_queryBase:function(b,f,e,d,g){if(SuperMap.OSP.Core.Utility._isEmpty(this.url)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.ExtentionService.Resources","ShareMap_field_dataHandler"));return false}this.dataHandler=this.url+SuperMap.OSP.Core._ServiceSuffix;function a(h){if(h){if(h.error&&typeof(d)=="function"){d(h.error)}}e(h.result[0])}function c(h){if(typeof(d)=="function"){var i=new SuperMap.OSP.Service.ErrorResult;i.type=SuperMap.OSP.Core.ErrorType.ENVIRONMENT;i.information=h;d(i)}}SuperMap.OSP.Core.Utility.committer(this.dataHandler,"ShareMap",b,f,false,a,c,g)},_warn:function(a){alert(a)},_isNotEmpty:function(b){var a=false;if(b!=null&&b!=""){a=true}return a},CLASS_NAME:"SuperMap.OSP.ExtentionService.ShareMap"});SuperMap.OSP.ExtentionService.GeocodeParam=SuperMap.Class({initialize:function(){},dataSourceName:null,datasetName:null,province:null,city:null,address:null,expectCount:10,startRecord:0,CLASS_NAME:"SuperMap.OSP.ExtentionService.GeocodeParam"});SuperMap.OSP.ExtentionService.Geocoder=SuperMap.Class({initialize:function(){},url:null,getPoint:function(a,c,b,d){if(SuperMap.OSP.Core.Utility._isEmpty(a)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Geocoder_getPoint_param_geocodeParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(c)&&typeof(c)!="function"){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Geocoder_getPoint_param_geocodeParam_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.address)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Geocoder_getPoint_param_geocodeParam_address_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.dataSourceName)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Geocoder_getPoint_param_geocodeParam_dataSourceName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.datasetName)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Geocoder_getPoint_param_geocodeParam_datasetName_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.startRecord)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Geocoder_getPoint_param_geocodeParam_startRecord_error"));return false}if(SuperMap.OSP.Core.Utility._isEmpty(a.expectCount)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Geocoder_getPoint_param_geocodeParam_expectCount_error"));return false}this._queryBase("getPoint",a,c,b,d)},_queryBase:function(b,f,e,d,g){if(SuperMap.OSP.Core.Utility._isEmpty(this.url)){throw new Error(SuperMap.OSP.Utility.Resource.getMessage("SuperMap.OSP.Service.Resources","Geocoder_filed_dataHandler_error"));return false}this.dataHandler=this.url+SuperMap.OSP.Core._ServiceSuffix;function a(h){if(h){if(h.error&&typeof(d)=="function"){d(h.error)}}e(h.result[0])}function c(h){if(typeof(d)=="function"){var i=new SuperMap.OSP.Service.ErrorResult;i.type=SuperMap.OSP.Core.ErrorType.ENVIRONMENT;i.information=h;d(i)}}SuperMap.OSP.Core.Utility.committer(this.dataHandler,"Geocoder",b,f,false,a,c,g)},CLASS_NAME:"SuperMap.OSP.ExtentionService.Geocoder"});SuperMap.OSP.ExtentionService.GeocodeResult=SuperMap.Class({initialize:function(){},id:"",city:null,address:null,province:null,point:null,CLASS_NAME:"SuperMap.OSP.ExtentionService.GeocodeResult"});SuperMap.Layer.Vector.prototype.addGFeature=function(d){var e=[];if(d.geometry.getVertices()!=null){var g=d.geometry.getVertices();var a=g.length;for(var c=0;c<a;c++){e.push(g[c])}var f=this;var h=new SuperMap.OSP.Service.Utility.CoordinateParam();h.coordinates=e;var b=new SuperMap.OSP.Service.Utility.CoordinateService();b.url=SuperMap.OSP.Core._ServiceUrl;b.convertGPS2SMs(h,function(l){if(l&&l.length>0){var o=[];for(var n=0;n<l.length;n++){o.push(new SuperMap.Geometry.Point(l[n].x,l[n].y))}if(o.length>1){var m=new SuperMap.Geometry.LineString(o);d.geometry=m}else{var j=o[0];d.geometry=j}f.addFeatures([d])}},function(i){})}};